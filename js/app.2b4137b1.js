(function(){"use strict";var e={146:function(e,t,o){var n=o(751),s=o(641);function l(e,t){const o=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(o)}var a=o(262);const r={},i=(0,a.A)(r,[["render",l]]);var c=i,u=o(723);(0,u.k)("/Bookit-V2-Working/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=o(220),k=o(33),h=o.p+"img/Bookitwh.50273ee1.webp";const p=e=>((0,s.Qi)("data-v-5adfa8af"),e=e(),(0,s.jt)(),e),b={class:"bg"},m={class:"container d-flex justify-content-center align-items-center min-vh-100"},g={class:"row whitebg"},v=p((()=>(0,s.Lk)("div",{class:"col-6 leftimg"},[(0,s.Lk)("img",{class:"imglogo",src:h,height:"100px",width:"100px"})],-1))),L={class:"col-6 rightside d-flex justify-content-center align-items-center"},y=p((()=>(0,s.Lk)("div",{class:"role"},[(0,s.Lk)("a",{href:"/"},"User"),(0,s.eW)(" | "),(0,s.Lk)("a",{href:"/lib/login",style:{"font-weight":"100"}},"Librarian")],-1))),_={class:"login"},f=p((()=>(0,s.Lk)("header",{class:"display-6"}," Login ",-1))),A=p((()=>(0,s.Lk)("input",{type:"email",name:"email",placeholder:"Email",class:"inp",required:""},null,-1))),w=p((()=>(0,s.Lk)("br",null,null,-1))),C=p((()=>(0,s.Lk)("br",null,null,-1))),S=p((()=>(0,s.Lk)("input",{type:"password",name:"pass",placeholder:"Password",class:"inp",required:""},null,-1))),F=p((()=>(0,s.Lk)("br",null,null,-1))),E=p((()=>(0,s.Lk)("br",null,null,-1))),B=p((()=>(0,s.Lk)("div",{class:"signup"},[(0,s.eW)(" Not a member? "),(0,s.Lk)("a",{href:"/user/signup"},"Sign Up here")],-1)));function j(e,t,o,l,a,r){const i=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",b,[(0,s.Lk)("div",m,[(0,s.Lk)("div",g,[v,(0,s.Lk)("div",L,[y,(0,s.Lk)("div",_,[f,(0,s.Lk)("form",{autocomplete:"off",method:"POST",onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>r.sendData&&r.sendData(...e)),["prevent"]))},[A,(0,s.eW)(),w,C,S,F,E,(0,s.Lk)("input",{type:"submit",value:"Sign In",class:"submit",onMouseover:t[0]||(t[0]=e=>a.hovered=!0),onMouseleave:t[1]||(t[1]=e=>a.hovered=!1),style:(0,k.Tr)({"box-shadow":a.hovered?"5px 5px 10px 1px rgba(0,0,0,0.4)":"","background-color":a.hovered?"rgb(225, 195, 150)":"",color:a.hovered?"white":""})},null,36)],32),B])])])])]),(0,s.bF)(i)],64)}var x="data:image/webp;base64,UklGRioBAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSKcAAAABRyAQSOEmFxERDEC1be2NslMWsXSQvciikB1+iUtkohhJJ5okM9+TU94gov8T4F+v5/UBoIuI2AKX8ZCfvfcljAnLY8Jy5LDT57SNnXldGCuGyhDxoDthLHeivJpll4mpeEwUdmYssudtWO5/IpjnbSJ32jCWO/36Ve8y8V0ZI060F3SN5Y+H3LTEchSwEzmGBGOCq6jXdt+jBF1ExBawfP7xdOBfAQBWUDggXAAAAFADAJ0BKhgAGAA+kUKdSqWjoqGoCACwEglAE6ZQZdKGom0AAP74T0lU0pBldgmZAI1BOykaPCQj4uyL36MequTxV7325545ns4LPAgbrE3bs1Awr5vbBos+cAAA";const I=e=>((0,s.Qi)("data-v-07040dbc"),e=e(),(0,s.jt)(),e),T=I((()=>(0,s.Lk)("img",{src:x},null,-1))),O=I((()=>(0,s.Lk)("a",{href:"/about",style:{color:"rgb(255,255,255)",position:"absolute",left:"1300px"}}," About us ",-1)));function X(e,t,o,n,l,a){return(0,s.uX)(),(0,s.CE)("footer",null,[T,(0,s.eW)(" Bookit, 2024. All rights reserved "),O])}var D={name:"Footer"};const N=(0,a.A)(D,[["render",X],["__scopeId","data-v-07040dbc"]]);var Q=N,R={name:"HomeView",data(){return{hovered:!1,loginTime:""}},components:{Footer:Q},methods:{sendData(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries()),n=JSON.stringify({...o,role:"user"});fetch("https://sohamk.pythonanywhere.com/auth/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){if(!e.ok)throw 404==e.status&&swal("User not found!","Please register with us to continue!","error"),401==e.status&&swal("OOPS!","Invalid Credentials!","error"),403==e.status&&swal("Unauthorized!","You do not have access","error"),new Error("HTTP error, status = "+e.status);return e.json()})).then((function(e){swal("Done!","Login Successful!","success"),localStorage.setItem("ac_token",e.tokens.ac_token),localStorage.setItem("ref_token",e.tokens.ref_token);var t=new Date;localStorage.setItem("login_time",t),Ju.push("/user/home")})).catch((function(e){console.log(e)}))}}};const P=(0,a.A)(R,[["render",j],["__scopeId","data-v-5adfa8af"]]);var q=P;const K=e=>((0,s.Qi)("data-v-55db8809"),e=e(),(0,s.jt)(),e),z={class:"bg"},U={class:"container d-flex justify-content-center align-items-center min-vh-100"},G={class:"row whitebg"},W=K((()=>(0,s.Lk)("div",{class:"col-6 leftimg"},[(0,s.Lk)("img",{class:"imglogo",src:h,height:"100px",width:"100px"})],-1))),$={class:"col-6 rightside d-flex justify-content-center align-items-center"},J=K((()=>(0,s.Lk)("div",{class:"role"},[(0,s.Lk)("a",{href:"/",style:{"font-weight":"100"}},"User"),(0,s.eW)(" | "),(0,s.Lk)("a",{href:"/lib/login"},"Librarian")],-1))),M={class:"login"},H=K((()=>(0,s.Lk)("header",{class:"display-6"}," Login ",-1))),V=K((()=>(0,s.Lk)("input",{type:"email",name:"email",placeholder:"Email",class:"inp",required:""},null,-1))),Y=K((()=>(0,s.Lk)("br",null,null,-1))),Z=K((()=>(0,s.Lk)("br",null,null,-1))),ee=K((()=>(0,s.Lk)("input",{type:"password",name:"pass",placeholder:"Password",class:"inp",required:""},null,-1))),te=K((()=>(0,s.Lk)("br",null,null,-1))),oe=K((()=>(0,s.Lk)("br",null,null,-1)));function ne(e,t,o,l,a,r){const i=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",z,[(0,s.Lk)("div",U,[(0,s.Lk)("div",G,[W,(0,s.Lk)("div",$,[J,(0,s.Lk)("div",M,[H,(0,s.Lk)("form",{autocomplete:"off",method:"POST",onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>r.libLogin&&r.libLogin(...e)),["prevent"]))},[V,(0,s.eW)(),Y,Z,ee,te,oe,(0,s.Lk)("input",{type:"submit",value:"Sign In",class:"submit",onMouseover:t[0]||(t[0]=e=>a.hovered=!0),onMouseleave:t[1]||(t[1]=e=>a.hovered=!1),style:(0,k.Tr)({"box-shadow":a.hovered?"5px 5px 10px 1px rgba(0,0,0,0.4)":"","background-color":a.hovered?"rgb(225, 195, 150)":"",color:a.hovered?"white":""})},null,36)],32)])])])])]),(0,s.bF)(i)],64)}var se={name:"HomeView",data(){return{hovered:!1}},methods:{libLogin(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries()),n=JSON.stringify({...o,role:"librarian"});fetch("https://sohamk.pythonanywhere.com/auth/lib/login",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){if(!e.ok)throw 401==e.status&&swal("OOPS!","Invalid Credentials!","error"),403==e.status&&swal("Unauthorized!","You do not have access","error"),new Error("HTTP error, status = "+e.status);return e.json()})).then((function(e){swal("Done!","Login Successful!","success"),localStorage.setItem("ac_token",e.tokens.ac_token),localStorage.setItem("ref_token",e.tokens.ref_token);var t=new Date;localStorage.setItem("login_time",t),Ju.push("/lib/home")})).catch((function(e){console.log(e)}))}},components:{Footer:Q}};const le=(0,a.A)(se,[["render",ne],["__scopeId","data-v-55db8809"]]);var ae=le;const re=e=>((0,s.Qi)("data-v-26274277"),e=e(),(0,s.jt)(),e),ie={class:"bg"},ce={class:"container d-flex justify-content-center align-items-center min-vh-100"},ue={class:"row whitebg"},de=re((()=>(0,s.Lk)("div",{class:"col-6 leftimg"},[(0,s.Lk)("img",{class:"imglogo",src:h,height:"100px",width:"100px"})],-1))),ke={class:"col-6 rightside d-flex justify-content-center align-items-center"},he=re((()=>(0,s.Lk)("div",{class:"role"},[(0,s.Lk)("a",{href:"/",style:{"font-weight":"100"}},"User"),(0,s.eW)(" | "),(0,s.Lk)("a",{href:"/lib/login",style:{"font-weight":"100"}},"Librarian")],-1))),pe={class:"login"},be=re((()=>(0,s.Lk)("header",{class:"display-6"}," Sign Up ",-1))),me=re((()=>(0,s.Lk)("input",{type:"email",name:"email",placeholder:"Email",class:"inp",required:""},null,-1))),ge=re((()=>(0,s.Lk)("br",null,null,-1))),ve=re((()=>(0,s.Lk)("br",null,null,-1))),Le=re((()=>(0,s.Lk)("input",{type:"text",name:"f_name",placeholder:"First Name",class:"inp",required:""},null,-1))),ye=re((()=>(0,s.Lk)("br",null,null,-1))),_e=re((()=>(0,s.Lk)("br",null,null,-1))),fe=re((()=>(0,s.Lk)("input",{type:"text",name:"l_name",placeholder:"Last Name",class:"inp",required:""},null,-1))),Ae=re((()=>(0,s.Lk)("br",null,null,-1))),we=re((()=>(0,s.Lk)("br",null,null,-1))),Ce=re((()=>(0,s.Lk)("input",{type:"password",name:"password",placeholder:"Password",class:"inp",required:""},null,-1))),Se=re((()=>(0,s.Lk)("br",null,null,-1))),Fe=re((()=>(0,s.Lk)("br",null,null,-1)));function Ee(e,t,o,l,a,r){const i=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ie,[(0,s.Lk)("div",ce,[(0,s.Lk)("div",ue,[de,(0,s.Lk)("div",ke,[he,(0,s.Lk)("div",pe,[be,(0,s.Lk)("form",{autocomplete:"off",method:"POST",onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[me,(0,s.eW)(),ge,ve,Le,ye,_e,fe,Ae,we,Ce,Se,Fe,(0,s.Lk)("input",{type:"submit",value:"Sign Up",class:"submit",onMouseover:t[0]||(t[0]=e=>a.hovered=!0),onMouseleave:t[1]||(t[1]=e=>a.hovered=!1),style:(0,k.Tr)({"box-shadow":a.hovered?"5px 5px 10px 1px rgba(0,0,0,0.4)":"","background-color":a.hovered?"rgb(225, 195, 150)":"",color:a.hovered?"white":""})},null,36)],32)])])])])]),(0,s.bF)(i)],64)}var Be=o(158),je=o.n(Be),xe={name:"userSignup",data(){return{hovered:!1,success:!1}},methods:{handleSubmit(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries()),n=JSON.stringify({...o,role:"user"});fetch("https://sohamk.pythonanywhere.com/auth/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){if(!e.ok)throw 409==e.status&&je()("OOPS!","Email already exists!","error"),new Error("HTTP error, status = "+e.status);return e.json()})).then((function(e){je()("Done!","User created successfully!","success"),Ju.push("/")})).catch((function(e){console.log(e)}))}},components:{Footer:Q}};const Ie=(0,a.A)(xe,[["render",Ee],["__scopeId","data-v-26274277"]]);var Te=Ie,Oe=o.p+"img/singlebook.bbde2976.webp";const Xe=e=>((0,s.Qi)("data-v-05ef7562"),e=e(),(0,s.jt)(),e),De={class:"container mainhome mb-5",action:"/login",style:{"margin-top":"50px"}},Ne={key:0,class:"section-details pb-5",style:{"padding-left":"50px"}},Qe=Xe((()=>(0,s.Lk)("br",null,null,-1))),Re=Xe((()=>(0,s.Lk)("br",null,null,-1))),Pe={class:"row",style:{"margin-bottom":"50px","text-align":"center"}},qe={class:"col",style:{"padding-left":"80px"}},Ke={class:"divincol"},ze=Xe((()=>(0,s.Lk)("img",{src:Oe,class:"bkimg",height:"210px"},null,-1))),Ue={class:"imglabel"},Ge={class:"imgtext"};function We(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("router-link"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",De,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.sections,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[Object.keys(e.section_books).length>0?((0,s.uX)(),(0,s.CE)("div",Ne,[(0,s.Lk)("strong",null,"Section: "+(0,k.v_)(e.section_name),1),Qe,Re,(0,s.eW)(" "+(0,k.v_)(e.section_description),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.section_books,((e,t)=>((0,s.uX)(),(0,s.CE)("div",qe,[(0,s.bF)(i,{to:`/book_info/${t}`},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ke,[ze,(0,s.Lk)("div",Ue,[(0,s.Lk)("span",Ge,(0,k.v_)(e),1)])])])),_:2},1032,["to"])])))),256))])],64)))),256))]),(0,s.bF)(c)],64)}var $e="data:image/webp;base64,UklGRtoAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSF4AAAABRyAQSOEmFxERDDCNbNvJ+Rn5HW1QAiiQSErA4r4kQ985FRDR/wng2VSd8HMQR31Y8oN0tdmqd/xcwFiLTRMk+CUGktUBNEFDW7H1o4M22qGNnmqjX1gPIyiPLO8EVlA4IFYAAACQAwCdASoYABgAPpFCnEolo6KhqAgAsBIJQBOmUGZokAAUadYAAP74ULGG9hU44Ea9kEit65N0LESi/H5UNcPJ8wKTe/KrdtSR04CmKQ7ovfv+xpjAAA==",Je="data:image/webp;base64,UklGRgQBAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSIkAAAABRyAQSOEmFxERDDi1tr1Nvm5bNpI6ZGRlcUhkJK6RbGK7//v+sy4hov8TAG/xbRNLOROpyHTXm2rJTWMBPGrTnACNNBGAUpuWyGVKAKFM4wHorqaHXoslN5UzkYJV/GRic798261FEBElplluqkkaGh0DpyVl3RkA+iMbU3ar2RwzIRmBl5qFBgBWUDggVAAAAJADAJ0BKhgAGAA+kUKdSiWjoqGoCACwEgliAJ05QVQeGIDIlBAA/vhOqPPz9NdQFG6vDFHDWglZ0erN0Q01LkG/IGZaRbztEAzV+yMR7wT3rMAAAA==",Me="data:image/webp;base64,UklGRvIAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSGIAAAABRyAQSOEmFxERDDCNbTvKD3sJSFwskjKQaFQkg/qa9fdNcoEOIvqvsG3bhkl3/Yh8L1NkuLyxqLQgVtLhzMntQGcU6ycyDmRpydaQvXwklYvIGQvyq1ZPuUsxFyg3+yTHJVZQOCBqAAAA0AMAnQEqGAAYAD6RQJtKJaOiIagIALASCUATplxEtk1WmkgN3J0AAP74ULHL3iYycZw05WsW5xBADfr1KdXeKbf03Z/Nmf2L0kLH2MhVJXBmOzwPy62IDv+thxMP1o8mhcMFG3LjYAAAAA==",He="data:image/webp;base64,UklGRpQAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSEgAAAABRyAQSOEmFxERDLCKbLdKWkADErBWCfnkzfV9bzLBQUT/J8B+fCGdEAqTdbJkTnnLYFU7APicwSQYmyWGZZaULEFBSI8aVA1WUDggJgAAANACAJ0BKhgAGAA+kUSdSqWjoqGoCACwEglpAAA9o6AA/vhNAAAA",Ve=o.p+"img/cross.a0d9478d.svg";const Ye=e=>((0,s.Qi)("data-v-33fea1bc"),e=e(),(0,s.jt)(),e),Ze={class:"navbar"},et=Ye((()=>(0,s.Lk)("img",{class:"imglogo logohome",src:h,height:"100px",width:"100px",alt:"logo"},null,-1))),tt=Ye((()=>(0,s.Lk)("input",{class:"inp1",type:"search",name:"search",placeholder:"ðŸ”Žï¸Ž Type and press enter to search"},null,-1))),ot=[tt],nt={class:"linklist"},st={key:0,class:"navbar_links"},lt=Ye((()=>(0,s.Lk)("img",{src:$e,alt:"home icon"},null,-1))),at={key:1,class:"navbar_links"},rt=Ye((()=>(0,s.Lk)("img",{src:$e,alt:"home icon"},null,-1))),it={key:2,class:"navbar_links"},ct=Ye((()=>(0,s.Lk)("img",{src:Je,alt:"user icon"},null,-1))),ut={key:3,class:"navbar_links"},dt=Ye((()=>(0,s.Lk)("img",{src:Je,alt:"user icon"},null,-1))),kt={key:4,class:"navbar_links"},ht=Ye((()=>(0,s.Lk)("img",{src:Me,alt:"shopping cart"},null,-1))),pt={class:"navbar_links"},bt=Ye((()=>(0,s.Lk)("img",{src:He,alt:"shopping cart"},null,-1))),mt=[bt],gt={key:0,class:"resultdiv"};function vt(e,t,o,l,a,r){const i=(0,s.g2)("router-link"),c=(0,s.g2)("searchResults");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("nav",Ze,[et,(0,s.Lk)("form",{autocomplete:"off",class:"d-flex search",role:"search",onSubmit:t[0]||(t[0]=(0,n.D$)(((...e)=>r.search&&r.search(...e)),["prevent"]))},ot,32),(0,s.Lk)("div",nt,[(0,s.Lk)("ul",null,["user"==a.usr_role?((0,s.uX)(),(0,s.CE)("li",st,[(0,s.bF)(i,{to:"/user/home"},{default:(0,s.k6)((()=>[lt])),_:1})])):(0,s.Q3)("",!0),"librarian"==a.usr_role?((0,s.uX)(),(0,s.CE)("li",at,[(0,s.bF)(i,{to:"/lib/home"},{default:(0,s.k6)((()=>[rt])),_:1})])):(0,s.Q3)("",!0),"user"==a.usr_role?((0,s.uX)(),(0,s.CE)("li",it,[(0,s.bF)(i,{to:"/user/profile",class:"navicons"},{default:(0,s.k6)((()=>[ct,(0,s.eW)(" Hello, "+(0,k.v_)(a.f_name),1)])),_:1})])):(0,s.Q3)("",!0),"librarian"==a.usr_role?((0,s.uX)(),(0,s.CE)("li",ut,[(0,s.bF)(i,{to:"/lib/profile",class:"navicons"},{default:(0,s.k6)((()=>[dt,(0,s.eW)(" Hello, "+(0,k.v_)(a.f_name),1)])),_:1})])):(0,s.Q3)("",!0),"user"==a.usr_role?((0,s.uX)(),(0,s.CE)("li",kt,[(0,s.bF)(i,{to:"/user/cart",class:"navicons"},{default:(0,s.k6)((()=>[ht])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("li",pt,[(0,s.Lk)("button",{href:"/logout",class:"navicons",style:{"background-color":"transparent",border:"none"},onClick:t[1]||(t[1]=(...e)=>r.logout&&r.logout(...e))},mt)])])])]),a.result.results&&Object.keys(a.result.results).length>0&&a.resultFlag?((0,s.uX)(),(0,s.CE)("div",gt,[(0,s.Lk)("button",{type:"button",class:(0,k.C4)({close1:"book"===a.result.results.object,close2:"section"===a.result.results.object,close3:"author"===a.result.results.object})},[(0,s.Lk)("img",{src:Ve,onClick:t[2]||(t[2]=e=>a.resultFlag=!1)})],2),(0,s.bF)(c,{result:a.result,resultFlag:a.resultFlag},null,8,["result","resultFlag"])])):!Object.keys(a.result.results).length>0&&a.resultFlag?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,k.v_)(r.NoResult()),1)],64)):(0,s.Q3)("",!0)],64)}const Lt=e=>((0,s.Qi)("data-v-5e01b7d9"),e=e(),(0,s.jt)(),e),yt=Lt((()=>(0,s.Lk)("h1",{class:"display-6 mb-2 srchhead"},"Search Results",-1))),_t={key:0,class:"row"},ft={class:"col colimghome text-center"},At={class:"divincol"},wt=Lt((()=>(0,s.Lk)("img",{src:Oe,class:"bkimg",height:"210px"},null,-1))),Ct={class:"imglabel mt-4"},St={class:"imgtext"},Ft={class:"mb-3 display-6",style:{"font-size":"25px"}},Et={class:"desc mb-4"},Bt={class:"row",style:{"margin-bottom":"50px"}},jt={class:"mb-3"},xt={class:"col colimghome"},It={class:"divincol text-center"},Tt=Lt((()=>(0,s.Lk)("img",{src:Oe,class:"bkimg",height:"210px"},null,-1))),Ot={class:"imglabel mt-4"},Xt={class:"imgtext"},Dt={class:"mb-3 display-6",style:{"font-size":"25px"}},Nt={class:"desc mb-4",style:{"font-size":"20px"}},Qt={class:"mb-3"},Rt={class:"row",style:{"margin-bottom":"50px"}},Pt={class:"col colimghome text-center"},qt={class:"divincol"},Kt=Lt((()=>(0,s.Lk)("img",{src:Oe,class:"bkimg",height:"210px"},null,-1))),zt={class:"imglabel mt-4"},Ut={class:"imgtext"};function Gt(e,t,o,n,l,a){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[yt,"book"==o.result.results.object?((0,s.uX)(),(0,s.CE)("div",_t,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.result.results.book_names,((e,t)=>((0,s.uX)(),(0,s.CE)("div",ft,[(0,s.bF)(r,{to:`/book_info/${o.result.results.book_ids[t]}`},{default:(0,s.k6)((()=>[(0,s.Lk)("div",At,[wt,(0,s.Lk)("div",Ct,[(0,s.Lk)("span",St,(0,k.v_)(e),1)])])])),_:2},1032,["to"])])))),256))])):(0,s.Q3)("",!0),"section"==o.result.results.object?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(o.result,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.computeSection(e),((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ft,"Section: "+(0,k.v_)(e.section_name),1),(0,s.Lk)("div",Et,"Description: "+(0,k.v_)(e.section_description),1),(0,s.Lk)("div",Bt,[(0,s.Lk)("div",jt,"Books in "+(0,k.v_)(e.section_name)+":",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.section_books,((e,t)=>((0,s.uX)(),(0,s.CE)("div",xt,[(0,s.bF)(r,{to:`/book_info/${t}`},{default:(0,s.k6)((()=>[(0,s.Lk)("div",It,[Tt,(0,s.Lk)("div",Ot,[(0,s.Lk)("span",Xt,(0,k.v_)(e),1)])])])),_:2},1032,["to"])])))),256))])],64)))),256))],64)))),256)):(0,s.Q3)("",!0),"author"==o.result.results.object?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(o.result,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.computeAuthor(e),((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Dt,"Author: "+(0,k.v_)(e.author_name),1),(0,s.Lk)("div",Nt,"Description: "+(0,k.v_)(e.author_description),1),(0,s.Lk)("div",Qt,"Books by "+(0,k.v_)(e.author_name)+":",1),(0,s.Lk)("div",Rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.author_books,((e,t)=>((0,s.uX)(),(0,s.CE)("div",Pt,[(0,s.bF)(r,{to:`/book_info/${t}`},{default:(0,s.k6)((()=>[(0,s.Lk)("div",qt,[Kt,(0,s.Lk)("div",zt,[(0,s.Lk)("span",Ut,(0,k.v_)(e),1)])])])),_:2},1032,["to"])])))),256))])],64)))),256))],64)))),256)):(0,s.Q3)("",!0)],64)}var Wt={name:"searchResults",props:{result:Object,resultFlag:Boolean},methods:{computeSection(e){const{object:t,...o}=e;return o},computeAuthor(e){const{object:t,...o}=e;return o}}};const $t=(0,a.A)(Wt,[["render",Gt],["__scopeId","data-v-5e01b7d9"]]);var Jt=$t,Mt={name:"Navbar",data(){return{f_name:"",l_name:"",usr_id:"",usr_role:"",result:{results:{}},resultFlag:!1}},mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.f_name=e.user_details.f_name,this.l_name=e.user_details.l_name,this.usr_id=e.user_details.usr_id,this.usr_role=e.user_details.role,this.usr_role})).catch((e=>console.log(e)))},methods:{logout(){je()({title:"Logout",text:"Are you sure ?",icon:"warning",buttons:!0,dangerMode:!0}).then((e=>{e&&fetch("https://sohamk.pythonanywhere.com/auth/logout",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>(localStorage.removeItem("ac_token"),fetch("https://sohamk.pythonanywhere.com/auth/logout",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ref_token")}`}}).then((e=>(localStorage.removeItem("ref_token"),this.$router.push({path:"/"}),e.json()))).catch((function(e){je()("Error fecthing data!","It's us don't worry, we're on it","error"),console.log(e)})),e.json()))).then((e=>{je()("Logged out!","See you soon!","success")})).catch((function(e){je()("Error fecthing data!","It's us don't worry, we're on it","error"),console.log(e)}))}))},search(e){this.resultFlag=!0,fetch("https://sohamk.pythonanywhere.com/user/search",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({item:e.target.elements.search.value})}).then((e=>e.json())).then((e=>{this.result=e})).catch((e=>console.log(e)))},NoResult(){je()("No results found","Please try again","info")}},components:{searchResults:Jt}};const Ht=(0,a.A)(Mt,[["render",vt],["__scopeId","data-v-33fea1bc"]]);var Vt=Ht,Yt={name:"home",components:{Navbar:Vt,Footer:Q},data(){return{usr_id:0,sections:{}}},mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.usr_id=e.user_details.usr_id})).catch((e=>console.log(e))),fetch("https://sohamk.pythonanywhere.com/sections",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.sections=e,console.log(e)})).catch((e=>console.log(e)))}};const Zt=(0,a.A)(Yt,[["render",We],["__scopeId","data-v-05ef7562"]]);var eo=Zt;const to=e=>((0,s.Qi)("data-v-94dd8fda"),e=e(),(0,s.jt)(),e),oo={class:"container"},no={class:"row"},so={class:"col-5 bookimgcol"},lo=to((()=>(0,s.Lk)("img",{src:Oe,height:"350px",width:"350px",class:"bookimg"},null,-1))),ao={class:"container booklinkmenu"},ro={class:"row"},io={class:"col"},co={key:0,class:"btn btn-outline-primary btn-block actlinks",disabled:""},uo={class:"row"},ko={class:"col"},ho={key:0,class:"btn btn-outline-primary actlinks",disabled:""},po={class:"row"},bo={class:"col"},mo={key:0,class:"btn btn-outline-primary actlinks",disabled:""},go=["href","download"],vo={class:"col aboutbook text-align-left"},Lo={class:"display-3 bookname"},yo={key:0,class:"authorname"},_o={class:"book_desc"},fo={class:"author_desc"},Ao=to((()=>(0,s.Lk)("h1",{class:"display-5"}," About Authors ",-1))),wo=to((()=>(0,s.Lk)("br",null,null,-1))),Co=to((()=>(0,s.Lk)("h1",{class:"display-5"}," About Author ",-1))),So=to((()=>(0,s.Lk)("br",null,null,-1))),Fo={class:"container mt-5"},Eo={class:"row"},Bo={class:"col"},jo={class:"display-6",style:{"font-size":"30px"}},xo=to((()=>(0,s.Lk)("br",null,null,-1))),Io=to((()=>(0,s.Lk)("br",null,null,-1))),To=to((()=>(0,s.Lk)("br",null,null,-1))),Oo={class:"container feedback"},Xo={class:"row feedback"},Do=to((()=>(0,s.Lk)("h1",{class:"display-5"}," Feedbacks",-1))),No={class:"col infeed",style:{"margin-top":"50px"}},Qo={class:"display-6",style:{"font-size":"30px"}},Ro={key:1,class:"col infeed",style:{margin:"50px"}},Po=to((()=>(0,s.Lk)("span",{style:{"font-size":"26px"}}," No Feedbacks Yet",-1))),qo=[Po],Ko={class:"row addfeed"},zo=to((()=>(0,s.Lk)("div",{class:"col"},null,-1))),Uo=to((()=>(0,s.Lk)("div",{class:"col"},null,-1))),Go=to((()=>(0,s.Lk)("div",{class:"col"},[(0,s.Lk)("button",{class:"btn btn-outline-primary",disabled:""}," Add Feedback ")],-1))),Wo={class:"col"},$o={class:"col"},Jo={key:1,class:"formdiv"},Mo={type:"button",class:"close"},Ho=to((()=>(0,s.Lk)("span",{style:{position:"relative",right:"21px","font-weight":"bold"}},"Feedback:",-1))),Vo=to((()=>(0,s.Lk)("input",{class:"form-control",type:"text",name:"fdb",placeholder:"Enter your feedback"},null,-1))),Yo=to((()=>(0,s.Lk)("input",{class:"btn btn-outline-primary",type:"submit",value:"Submit Feedback"},null,-1))),Zo=to((()=>(0,s.Lk)("div",{class:"col"},null,-1))),en=to((()=>(0,s.Lk)("div",{class:"col"},null,-1))),tn=to((()=>(0,s.Lk)("div",{class:"col"},null,-1))),on={class:"container seemore"},nn={key:0},sn={class:"row"},ln={class:"col colimghomevb"},an=["onClick"],rn={class:"divincolvb"},cn=to((()=>(0,s.Lk)("img",{src:Oe,height:"210px"},null,-1))),un={class:"imglabel mt-4"};function dn(e,t,o,l,a,r){const i=(0,s.g2)("Navbar"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.Lk)("div",oo,[(0,s.Lk)("div",no,[(0,s.Lk)("div",so,[lo,(0,s.Lk)("div",ao,[(0,s.Lk)("div",ro,[(0,s.Lk)("div",io,["user"!=a.usr_role?((0,s.uX)(),(0,s.CE)("button",co," Add to Cart ")):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-outline-primary btn-block actlinks",onClick:t[0]||(t[0]=(...e)=>r.addItemToCart&&r.addItemToCart(...e))}," Add to Cart "))])]),(0,s.Lk)("div",uo,[(0,s.Lk)("div",ko,[a.books_issued.includes(a.book_id)||a.books_req.includes(a.book_id)||"user"!=a.usr_role?((0,s.uX)(),(0,s.CE)("button",ho," Request this book ")):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-outline-primary actlinks",onClick:t[1]||(t[1]=(...e)=>r.requestBook&&r.requestBook(...e))}," Request Book "))])]),(0,s.Lk)("div",po,[(0,s.Lk)("div",bo,["user"!=a.usr_role?((0,s.uX)(),(0,s.CE)("button",mo," Buy PDF for "+(0,k.v_)(a.book.book_price),1)):((0,s.uX)(),(0,s.CE)("a",{key:1,href:r.get_url_for_download,download:this.book.book_name},[(0,s.Lk)("button",{class:"btn btn-outline-primary actlinks",onClick:t[2]||(t[2]=(...e)=>r.BuyBook&&r.BuyBook(...e))}," Buy PDF for "+(0,k.v_)(a.book.book_price),1)],8,go))])])])]),(0,s.Lk)("div",vo,[(0,s.Lk)("h1",Lo,(0,k.v_)(a.book.book_name),1),a.book.book_section?((0,s.uX)(),(0,s.CE)("span",yo," By "+(0,k.v_)(r.joinedAuthorNames)+" | Section: "+(0,k.v_)(a.book.book_section.section_name),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",_o,(0,k.v_)(a.book.book_description),1),(0,s.Lk)("div",fo,[a.book.book_authors?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[Object.values(a.book.book_authors).length>1?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[Ao,wo],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[Co,So],64))],64)):(0,s.Q3)("",!0),(0,s.Lk)("div",Fo,[(0,s.Lk)("div",Eo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.book.book_authors,((e,t)=>((0,s.uX)(),(0,s.CE)("div",Bo,[(0,s.Lk)("h1",jo,(0,k.v_)(e.author_name),1),xo,(0,s.eW)(" "+(0,k.v_)(e.author_description),1),Io,To])))),256))])])])]),(0,s.Lk)("div",Oo,[(0,s.Lk)("div",Xo,[Do,a.book.book_feedbacks?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(a.book.book_feedbacks,((e,t)=>((0,s.uX)(),(0,s.CE)("div",No,[(0,s.Lk)("h1",Qo,(0,k.v_)(e[0]),1),(0,s.eW)(" "+(0,k.v_)(e[1]),1)])))),256)):((0,s.uX)(),(0,s.CE)("div",Ro,qo))]),(0,s.Lk)("div",Ko,[zo,Uo,r.fdbUserIdList.includes(a.usr_id)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[Go,(0,s.Lk)("div",Wo,[(0,s.Lk)("button",{class:"btn btn-outline-primary",onClick:t[3]||(t[3]=(...e)=>r.RemoveFeedback&&r.RemoveFeedback(...e))}," Remove Feedback ")])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",$o,[this.formflag?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-outline-primary",onClick:t[4]||(t[4]=e=>a.formflag=!0)}," Add Feedback ")),this.formflag?((0,s.uX)(),(0,s.CE)("div",Jo,[(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,n.D$)(((...e)=>r.SendFeedback&&r.SendFeedback(...e)),["prevent"])),class:"fdbform"},[(0,s.Lk)("button",Mo,[(0,s.Lk)("img",{src:Ve,onClick:t[5]||(t[5]=e=>a.formflag=!1)})]),Ho,(0,s.eW)(),Vo,Yo],32)])):(0,s.Q3)("",!0)]),Zo],64)),en,tn])]),(0,s.eW)(" "+(0,k.v_)(r.fetch_section_books)+" ",1),(0,s.Lk)("div",on,[a.book.book_section?((0,s.uX)(),(0,s.CE)("strong",nn,"More Books in "+(0,k.v_)(a.book.book_section.section_name),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",sn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.section_books,((e,t)=>((0,s.uX)(),(0,s.CE)("div",ln,[(0,s.Lk)("button",{onClick:e=>r.RedirectToBook(t),class:"book_link",style:{border:"none",background:"transparent"}},[(0,s.Lk)("div",rn,[cn,(0,s.Lk)("div",un,(0,k.v_)(e),1)])],8,an)])))),256))])])])]),(0,s.bF)(c)],64)}var kn={name:"book_info",mounted(){this.book_id=parseInt(this.$route.params.j,10),fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.usr_role=e.user_details.role,this.usr_id=e.user_details.usr_id})).catch((e=>console.log(e))),fetch("https://sohamk.pythonanywhere.com/user/user_book_info",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{this.books_issued=e.owned_books,this.books_req=e.requested_books})).catch((e=>console.log(e))),fetch("https://sohamk.pythonanywhere.com/books/book",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id})}).then((e=>e.json())).then((e=>{this.book=e})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q},data(){return{book_id:0,usr_role:"",books_issued:[],books_req:[],book:{},usr_id:0,section_books:[],section_books_ids:[],formflag:!1}},computed:{joinedAuthorNames(){let e=[];for(let t of Object.values(this.book.book_authors))e.push(t.author_name);return e.join(", ")},fdbUserIdList(){let e=[];if(this.book.book_feedbacks)for(let t of this.book.book_feedbacks)e.push(t[2]);return e},fetch_section_books(){this.book.book_section&&fetch("https://sohamk.pythonanywhere.com/sections/section",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({section_id:this.book.book_section.section_id})}).then((e=>e.json())).then((e=>{let t=Object.values(e.section_books).map((e=>e)),o=Object.keys(e.section_books).map((e=>e));this.section_books=t,this.section_books_id=o})).catch((e=>console.log(e)))},get_url_for_download(){return`data:application/pdf;base64,${this.book.book_content_base64_encoded}`}},methods:{addItemToCart(){fetch("https://sohamk.pythonanywhere.com/user/check_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{"Cart is not present"==e.msg?fetch("https://sohamk.pythonanywhere.com/user/create_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST"}).then((e=>e.json())).then((e=>{fetch("https://sohamk.pythonanywhere.com/user/add_to_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id})}).then((e=>e.json())).then((e=>{"Book added sucessfully"==e.msg?swal("Done","Book added to cart successfully","success"):swal("Book Exists","The book already exists in your cart","info")})).catch((e=>console.log(e)))})).catch((e=>console.log(e))):fetch("https://sohamk.pythonanywhere.com/user/add_to_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id})}).then((e=>e.json())).then((e=>{"Book added sucessfully"==e.msg?swal("Done","Book added to cart successfully","success"):swal("Book Exists","The book already exists in your cart","info")})).catch((e=>console.log(e)))}))},requestBook(){fetch("https://sohamk.pythonanywhere.com/user/request_book",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id})}).then((e=>e.json())).then((e=>{swal("Done","Book requested successfully","success")})).catch((e=>console.log(e)))},BuyBook(){swal("Payment Successfull","Thank you for purchasing with us","success")},RedirectToBook(e){this.$router.push({path:`/book_info/${this.section_books_id[e]}`}).then((()=>{window.location.reload()}))},RemoveFeedback(){swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this feedback!",icon:"warning",buttons:!0,dangerMode:!0}).then((e=>{e&&(fetch("https://sohamk.pythonanywhere.com/user/remove_feedback",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id})}).then((e=>e.json())).then((e=>{swal("Done","Feedback removed successfully","success")})).catch((e=>console.log(e))),swal("Done","Feedback removed successfully","success").then((()=>{window.location.reload()})))}))},SendFeedback(e){e.preventDefault();const t=new FormData(e.target),o=Object.fromEntries(t.entries()).fdb;this.formflag=!1,fetch("https://sohamk.pythonanywhere.com/user/add_feedback",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:this.book_id,feedback:o})}).then((e=>e.json())).then((e=>{swal("Done","Feedback added successfully","success").then((()=>{window.location.reload()}))})).catch((e=>console.log(e)))}}};const hn=(0,a.A)(kn,[["render",dn],["__scopeId","data-v-94dd8fda"]]);var pn=hn;const bn=e=>((0,s.Qi)("data-v-007e7b95"),e=e(),(0,s.jt)(),e),mn={class:"bgup"},gn={class:"row mainrowup"},vn={class:"col-5 leftcolup"},Ln={class:"col rightcolup updtfrm"},yn=bn((()=>(0,s.Lk)("header",{class:"display-4"}," Update Profile Details ",-1))),_n=bn((()=>(0,s.Lk)("br",null,null,-1))),fn=bn((()=>(0,s.Lk)("br",null,null,-1))),An=bn((()=>(0,s.Lk)("br",null,null,-1))),wn=["placeholder"],Cn=bn((()=>(0,s.Lk)("br",null,null,-1))),Sn=bn((()=>(0,s.Lk)("br",null,null,-1))),Fn=bn((()=>(0,s.Lk)("br",null,null,-1))),En=bn((()=>(0,s.Lk)("input",{type:"text",name:"fname",placeholder:"First Name",class:"inp",required:""},null,-1))),Bn=bn((()=>(0,s.Lk)("br",null,null,-1))),jn=bn((()=>(0,s.Lk)("br",null,null,-1))),xn=bn((()=>(0,s.Lk)("br",null,null,-1))),In=bn((()=>(0,s.Lk)("input",{type:"text",name:"lname",placeholder:"Last Name",class:"inp",required:""},null,-1))),Tn=bn((()=>(0,s.Lk)("br",null,null,-1))),On=bn((()=>(0,s.Lk)("br",null,null,-1))),Xn=bn((()=>(0,s.Lk)("br",null,null,-1))),Dn=bn((()=>(0,s.Lk)("input",{type:"password",name:"pass",placeholder:"Confirm your password",class:"inp",required:""},null,-1))),Nn=bn((()=>(0,s.Lk)("br",null,null,-1))),Qn=bn((()=>(0,s.Lk)("br",null,null,-1))),Rn=bn((()=>(0,s.Lk)("br",null,null,-1))),Pn=bn((()=>(0,s.Lk)("input",{type:"submit",value:"Update",class:"submit"},null,-1)));function qn(e,t,o,l,a,r){const i=(0,s.g2)("Navbar"),c=(0,s.g2)("Usermenu"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.Lk)("div",mn,[(0,s.Lk)("div",gn,[(0,s.Lk)("div",vn,[(0,s.bF)(c)]),(0,s.Lk)("div",Ln,[yn,_n,fn,An,(0,s.Lk)("form",{autocomplete:"off",method:"POST",onSubmit:t[0]||(t[0]=(0,n.D$)(((...e)=>r.sendData&&r.sendData(...e)),["prevent"]))},[(0,s.Lk)("input",{type:"email",name:"email",placeholder:a.user.email,class:"inp",disabled:""},null,8,wn),Cn,Sn,Fn,En,Bn,jn,xn,In,Tn,On,Xn,Dn,Nn,Qn,Rn,Pn],32)])])]),(0,s.bF)(u)],64)}var Kn="data:image/webp;base64,UklGRogEAABXRUJQVlA4WAoAAAAQAAAAdwAAdwAAQUxQSK8CAAABRyAQSOEmFxERDMi5tb1tGxKSy5hOj72MvYzd5pgejenRmB6O6vz+NwHifV+kTxH9h+BGkiIpukd7g9dQkPWF7C+x3bp8V/94fuiS/HVufqsOExxTa2kvXMLDrJdrj4lF2o20j8yiXcipxam6OqYAVsp4ZVArVMwwKhEvWzZmLb+999aCNqdhEkzwnj+Ms1p5e9l8Wnb0LJiDUzDwmc+yaC90Xy6R1esp3MA8XDs7wanq7e3YYMaql0f+O5hzbIvu9NHR8FjDUpyhxqR3/HN0OI7loQey67VnaywfG05gB1lgGQd3wBvbEhZhcyvpb8HGd6qjA3t1XxKrXCrqhhx2zUpizllSiAGlPUn7SKoP7QDRDvaXLuSbOhZw35SEum2ND8JjK3HfZHkJ20AtCdDLYRTHAnRHk1IKNMGJkn4PHw39YNKc8tAgCxqpctmtQE9BUiBPnLtVN+w+oLeWFCxbcCmuEJ1UI61HlIqVYiX6otFmXy1gXsMtUBP2M1H7hDGfSLX7X06pva2bUvNvaWsNQLWn6/1cXiDFDnV/ElAdZCnaypOmlrx02d9uu7V32bx2uJaCs5bo8eGe/OrXSPXrpOzUuvIXVOnR7nTHzAzpulAHtV6uClZgO9Z8wUJSfGDahj7gvWqb4GWTj560bVih+1/VdTxwWUW/8jIcX6uW2p2pfmbYhuzUmlz4EN3Ls6DPkTYFJ8wzxUeW8aHdmgg8YujTIdJqwdvjFiMGevy5Y/SeEacvOck5ZmXHKCYPxFp25hkeGYkqwuvJguITp/s/BkUBOaUF+E5QLxKn1I0JLezHlDvUtPZ7Sa1HUAPRJuuYPeBiGWN2LwWac0Ys5kBQpo6IT42iBYW2kB0H0Yx+8YSHcsOSCDid1NCG1Sd23qWiFtSLtwhn8EtrCf+/WgYAVlA4ILIBAAAQDwCdASp4AHgAPpE+mkilo6KhMnHIALASCWVu4MCtfACIeYjiCnGHi9NO3z54p9U/QD+Ae/73+FwcXGjwCgG/smqdyNUD2wQouCMEzlSr1AsiARs5P4Mkh69HTGrjD6KbIAQp7iM0yndw79MADenjktckxH6MNAARiKCAUkTl1xAA/h7p96ATd/68o7b8/g8Lf/Q6/+wdP/9fs3qu4ci7PYFhWFnlRPg1pKbeXtfRIx/HIC8cQY8GHxlVRBbWjlritfwQcEZAGaCZUjC0cMiQ2GButy7apm9I7ZaNwgJ1sYYZZoq/bMjCvJ3nvAVWyOPwPc4EiDifSBiwP0TjaZIAnjxQqZKMlwC/4czgFcyruE3FzVgq/tOXwY1hiCYb3Idg3JiDXWG61en4BNqPO/1R8u2HdZ2e6IEs///1KdPJpRNZB1ny5LQoHA566fodVG4vWNZIlREuIqo7/0Ov/sHT//X7kzY+ZpTTm2eX7p0dtKlp+j6y7OrESbmutPL7SLrxxYv8ozrLFBa94bKSnlOQl9+IzyPcZ3up2QzLQq4pT6hgtXStpur4MgMv2tgAAAAAAA==";const zn=e=>((0,s.Qi)("data-v-14c92e04"),e=e(),(0,s.jt)(),e),Un={class:"lefttextup"},Gn=zn((()=>(0,s.Lk)("img",{src:Kn,alt:"Big user icon",class:"usriconup"},null,-1))),Wn={class:"usernameup"},$n={class:"display-6"},Jn={class:"emailup"},Mn={class:"usrmenu"},Hn={style:{"list-style-type":"none"}},Vn={class:"usrmenu_links"},Yn=zn((()=>(0,s.Lk)("br",null,null,-1))),Zn={class:"usrmenu_links"},es=zn((()=>(0,s.Lk)("br",null,null,-1))),ts={class:"usrmenu_links"},os=zn((()=>(0,s.Lk)("br",null,null,-1)));function ns(e,t,o,n,l,a){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Un,[Gn,(0,s.Lk)("span",Wn,[(0,s.Lk)("h1",$n,(0,k.v_)(l.user.f_name)+" "+(0,k.v_)(l.user.l_name),1)]),(0,s.Lk)("span",Jn,[(0,s.Lk)("h5",null,(0,k.v_)(l.user.email),1)]),(0,s.Lk)("div",Mn,[(0,s.Lk)("ul",Hn,[(0,s.Lk)("li",Vn,[(0,s.bF)(r,{to:"/user/profile","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Edit Profile")])),_:1})]),Yn,(0,s.Lk)("li",Zn,[(0,s.bF)(r,{to:"/user/books","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" My Books")])),_:1})]),es,(0,s.Lk)("li",ts,[(0,s.bF)(r,{to:"/user/books_req","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Books requested")])),_:1})]),os])])])}var ss={name:"userProfile",mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user=e.user_details})).catch((e=>console.log(e)))},data(){return{user:{}}}};const ls=(0,a.A)(ss,[["render",ns],["__scopeId","data-v-14c92e04"]]);var as=ls,rs={name:"userProfile",mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user=e.user_details})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q,Usermenu:as},data(){return{user:{}}},methods:{sendData(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries()),n=JSON.stringify({...o});fetch("https://sohamk.pythonanywhere.com/auth/updtusr",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:n}).then((function(e){if(!e.ok&&401==e.status)throw je()("Error!","Invalid Password","error"),new Error("HTTP error, status = "+e.status);return e.json()})).then((()=>{je()("Success!","Profile updated successfully","success").then((()=>{window.location.reload()}))})).catch((e=>console.log(e)))}}};const is=(0,a.A)(rs,[["render",qn],["__scopeId","data-v-007e7b95"]]);var cs=is;const us=e=>((0,s.Qi)("data-v-0c252e92"),e=e(),(0,s.jt)(),e),ds={class:"bgup"},ks={class:"row mainrowup"},hs={class:"col-5 leftcolup"},ps={class:"col rightcolup bookstable"},bs=us((()=>(0,s.Lk)("header",{class:"display-4"}," My Books ",-1))),ms=us((()=>(0,s.Lk)("br",null,null,-1))),gs=us((()=>(0,s.Lk)("br",null,null,-1))),vs=us((()=>(0,s.Lk)("br",null,null,-1))),Ls={class:"table"},ys=us((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"}," Index "),(0,s.Lk)("th",{scope:"col"}," Book Name "),(0,s.Lk)("th",{scope:"col"}," Authors "),(0,s.Lk)("th",{scope:"col"}," Days Passed "),(0,s.Lk)("th",{scope:"col"}," Actions* ")])],-1))),_s={key:1,class:"action-btn btn btn-outline-primary btn-sm",disabled:""},fs=["onClick"],As=us((()=>(0,s.Lk)("div",{class:"msgpassed"},[(0,s.eW)(" * You can have books 7 days only, After that "),(0,s.Lk)("i",null,"Read Book"),(0,s.eW)(" is disabled ")],-1)));function ws(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Usermenu"),c=(0,s.g2)("router-link"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",ds,[(0,s.Lk)("div",ks,[(0,s.Lk)("div",hs,[(0,s.bF)(i)]),(0,s.Lk)("div",ps,[bs,ms,gs,vs,(0,s.Lk)("table",Ls,[ys,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.user_books,((e,t)=>((0,s.uX)(),(0,s.CE)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,s.Lk)("td",null,(0,k.v_)(Object.values(e.authors).join(",")),1),(0,s.Lk)("td",null,(0,k.v_)(e.days_passed),1),(0,s.Lk)("td",null,[e.days_passed<7?((0,s.uX)(),(0,s.Wv)(c,{key:0,to:`/read/${e.book_id}`,class:"action-btn btn btn-outline-primary btn-sm"},{default:(0,s.k6)((()=>[(0,s.eW)(" Read Book")])),_:2},1032,["to"])):((0,s.uX)(),(0,s.CE)("button",_s," Disabled ")),(0,s.Lk)("button",{class:"action-btn btn btn-outline-primary btn-sm",onClick:t=>a.returnBook(e.book_id)}," Return Book",8,fs)])])])))),256))]),(0,s.bF)(c,{class:"btn btn-outline-primary btn-sm",to:"/user/home",style:{"margin-top":"70px"}},{default:(0,s.k6)((()=>[(0,s.eW)(" Browse More Books ")])),_:1}),As])])]),(0,s.bF)(u)],64)}var Cs={name:"userBook",mounted(){fetch("https://sohamk.pythonanywhere.com/user/books",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user_books=e})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q,Usermenu:as},data(){return{user_books:{}}},methods:{returnBook(e){je()({title:"Return the book?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&fetch("https://sohamk.pythonanywhere.com/user/return_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({book_id:e})}).then((e=>e.json())).catch((e=>console.log(e))),je()({title:"Sucess",text:"Book Returned",icon:"success",button:"OK"}).then((()=>{window.location.reload()}))}))}}};const Ss=(0,a.A)(Cs,[["render",ws],["__scopeId","data-v-0c252e92"]]);var Fs=Ss;const Es=e=>((0,s.Qi)("data-v-734bfdd6"),e=e(),(0,s.jt)(),e),Bs={class:"readbookbg",style:{height:"100vh",width:"100vw","text-align":"center"}},js=["src"],xs=Es((()=>(0,s.Lk)("div",null,null,-1)));function Is(e,t,o,n,l,a){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Bs,[(0,s.Lk)("iframe",{src:"data:application/pdf;base64,"+l.book.book_content_base64_encoded,width:"50%",height:"100%"},null,8,js),(0,s.Lk)("button",{class:"btn btn-primary backbtn",onClick:t[0]||(t[0]=t=>e.$router.go(-2))}," Go Back ")]),xs],64)}var Ts={name:"readBook",mounted(){fetch("https://sohamk.pythonanywhere.com/books",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.books=e;for(const t of Object.values(this.books))t.book_id==this.$route.params.book_id&&(this.book=t)})).catch((e=>console.log(e)))},data(){return{books:{},book:{}}}};const Os=(0,a.A)(Ts,[["render",Is],["__scopeId","data-v-734bfdd6"]]);var Xs=Os;const Ds=function(){let e,t;fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{je()("Error!","It's us don't worry, we're on it","error"),console.error("Error:",e)}));const o=localStorage.getItem("intervalId");o&&clearInterval(Number(o)),t=setInterval((()=>{fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((o=>{e=o.user_details;var n=(new Date).getTime(),s=e.exp,l=Math.floor((s-n/1e3)/60);console.log(l),l<=10&&je()({title:`Your session is about to expire in ${l} minutes!`,text:"Do you want to stay logged in?",icon:"warning",buttons:["Log out","Stay"]}).then((e=>{e?fetch("https://sohamk.pythonanywhere.com/auth/refresh_access",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ref_token")}`}}).then((e=>{if(!e.ok)throw je()("Error fecthing data!","It's us don't worry, we're on it","error"),new Error(e.statusText+" "+e.status);return e.json()})).then((e=>{localStorage.setItem("ac_token",e.ac_token),je()("Success!","Your session has been refreshed!","success"),clearInterval(t),Ds()})).catch():(je()("Success!","Logged out successfully","success"),Ju.push("/"),clearInterval(t))}))})).catch((e=>{je()("Error!","It's us don't worry, we're on it","error"),console.error("Error:",e)}))}),6e5),localStorage.setItem("intervalId",t.toString())};var Ns=Ds;const Qs=e=>((0,s.Qi)("data-v-73be6450"),e=e(),(0,s.jt)(),e),Rs={class:"bgup"},Ps={class:"row mainrowup"},qs={class:"col-5 leftcolup"},Ks={class:"col rightcolup bookstable"},zs=Qs((()=>(0,s.Lk)("header",{class:"display-4"}," My Books ",-1))),Us=Qs((()=>(0,s.Lk)("br",null,null,-1))),Gs=Qs((()=>(0,s.Lk)("br",null,null,-1))),Ws=Qs((()=>(0,s.Lk)("br",null,null,-1))),$s={class:"table"},Js=Qs((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"}," Index "),(0,s.Lk)("th",{scope:"col"}," Book Name "),(0,s.Lk)("th",{scope:"col"}," Authors "),(0,s.Lk)("th",{scope:"col"}," Actions ")])],-1))),Ms=["onClick"];function Hs(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Usermenu"),c=(0,s.g2)("router-link"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",Rs,[(0,s.Lk)("div",Ps,[(0,s.Lk)("div",qs,[(0,s.bF)(i)]),(0,s.Lk)("div",Ks,[zs,Us,Gs,Ws,(0,s.Lk)("table",$s,[Js,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.user_books,((e,t)=>((0,s.uX)(),(0,s.CE)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,s.Lk)("td",null,(0,k.v_)(Object.values(e.authors).join(", ")),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"action-btn btn btn-outline-primary btn-sm",onClick:t=>a.cancelRequest(e.book_id)},"Cancel Request",8,Ms)])])])))),256))]),(0,s.bF)(c,{class:"btn btn-outline-primary btn-sm",to:"/user/home",style:{"margin-top":"70px"}},{default:(0,s.k6)((()=>[(0,s.eW)(" Browse More Books ")])),_:1})])])]),(0,s.bF)(u)],64)}var Vs={name:"userBook",mounted(){fetch("https://sohamk.pythonanywhere.com/user/view_req_books",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user_books=e})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q,Usermenu:as},data(){return{user_books:{}}},methods:{cancelRequest(e){je()({title:"Cancel the request?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&(fetch("https://sohamk.pythonanywhere.com/user/cancel_book_req",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({book_id:e})}).then((e=>e.json())).then((e=>{})).catch((e=>console.log(e))),je()({title:"Sucess",text:"Book Request Cancelled",icon:"success",button:"OK"}).then((()=>{window.location.reload()})))}))}}};const Ys=(0,a.A)(Vs,[["render",Hs],["__scopeId","data-v-73be6450"]]);var Zs=Ys;const el=e=>((0,s.Qi)("data-v-36e3d86d"),e=e(),(0,s.jt)(),e),tl={class:"bgup"},ol={class:"row mainrowup"},nl={class:"col-5 leftcolup"},sl={class:"col rightcolup"},ll=el((()=>(0,s.Lk)("header",{class:"display-4"}," My Cart ",-1))),al={class:"table"},rl=el((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",{scope:"col"}," Index "),(0,s.Lk)("th",{scope:"col"}," Product "),(0,s.Lk)("th",{scope:"col"}," Price "),(0,s.Lk)("th",{scope:"col"}," Action ")],-1))),il=["onClick"],cl={class:"total",style:{"text-align":"right",margin:"30px 110px 0"}},ul=el((()=>(0,s.Lk)("strong",null," Total Price: ",-1))),dl={class:"buy"};function kl(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Usermenu"),c=(0,s.g2)("router-link"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",tl,[(0,s.Lk)("div",ol,[(0,s.Lk)("div",nl,[(0,s.bF)(i)]),(0,s.Lk)("div",sl,[ll,Object.values(l.cart_books).length>0?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("table",al,[rl,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.cart_books,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("th",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_price),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary",onClick:t=>a.RemoveFromCart(e.book_id)}," Remove ",8,il)])])))),256))])]),(0,s.Lk)("div",cl,[ul,(0,s.eW)(" "+(0,k.v_)(a.total_price_cal),1)]),(0,s.Lk)("div",dl,[(0,s.Lk)("button",{class:"btn btn-outline-primary mt-5 buybtn",onClick:t[0]||(t[0]=(...e)=>a.DownloadBooks&&a.DownloadBooks(...e))}," Proceed to Buy ")])],64)):((0,s.uX)(),(0,s.Wv)(c,{key:1,to:"/user/home",class:"btn btn-outline-primary",style:{"margin-top":"210px"}},{default:(0,s.k6)((()=>[(0,s.eW)(" Add Books Now ")])),_:1}))])])]),(0,s.bF)(u)],64)}var hl=o(710),pl=o.n(hl),bl=o(213),ml={name:"Cart",mounted(){fetch("https://sohamk.pythonanywhere.com/user/check_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{"Cart is not present"==e.msg&&fetch("https://sohamk.pythonanywhere.com/user/create_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST"}).then((e=>e.json())).then((()=>{fetch("https://sohamk.pythonanywhere.com/user/get_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{this.cart_books=e}))}))})),fetch("https://sohamk.pythonanywhere.com/user/get_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{this.cart_books=e}))},data(){return{book_ids:[],cart_books:{},total_cart_price:0}},components:{Navbar:Vt,Footer:Q,Usermenu:as},methods:{RemoveFromCart(e){swal({title:"Are you sure?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&(fetch("https://sohamk.pythonanywhere.com/user/remove_from_cart",{headers:{Authorization:`Bearer ${localStorage.getItem("ac_token")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({book_id:e})}).then((e=>e.json())),swal({title:"Sucess",text:"Book Removed from Cart",icon:"success",button:"OK"}).then((()=>{window.location.reload()})))}))},DownloadBooks(){swal({title:"Payment Successful",text:"Thanks for your purchase",icon:"success",button:"OK"}).then((()=>{let e={};for(var t in this.cart_books)e[this.cart_books[t].book_name]=this.cart_books[t].book_content;const o=new(pl()),n=o.folder("Books");for(var t in e)n.file(`${t}.pdf`,e[t],{base64:!0});o.generateAsync({type:"blob"}).then((e=>{(0,bl.saveAs)(e,"Books.zip")}))}))}},computed:{total_price_cal(){let e=0;for(var t in this.cart_books)e+=this.cart_books[t].book_price;return e}}};const gl=(0,a.A)(ml,[["render",kl],["__scopeId","data-v-36e3d86d"]]);var vl=gl;const Ll=e=>((0,s.Qi)("data-v-4fac2a30"),e=e(),(0,s.jt)(),e),yl={class:"bgup"},_l={class:"row mainrowup"},fl={class:"col-5 leftcolup"},Al={class:"col rightcolup updtfrm"},wl=Ll((()=>(0,s.Lk)("header",{class:"display-4"}," Update Profile Details ",-1))),Cl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Sl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Fl=Ll((()=>(0,s.Lk)("br",null,null,-1))),El=["placeholder"],Bl=Ll((()=>(0,s.Lk)("br",null,null,-1))),jl=Ll((()=>(0,s.Lk)("br",null,null,-1))),xl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Il=Ll((()=>(0,s.Lk)("input",{type:"text",name:"fname",placeholder:"First Name",class:"inp",required:""},null,-1))),Tl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Ol=Ll((()=>(0,s.Lk)("br",null,null,-1))),Xl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Dl=Ll((()=>(0,s.Lk)("input",{type:"text",name:"lname",placeholder:"Last Name",class:"inp",required:""},null,-1))),Nl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Ql=Ll((()=>(0,s.Lk)("br",null,null,-1))),Rl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Pl=Ll((()=>(0,s.Lk)("input",{type:"password",name:"pass",placeholder:"Confirm your password",class:"inp",required:""},null,-1))),ql=Ll((()=>(0,s.Lk)("br",null,null,-1))),Kl=Ll((()=>(0,s.Lk)("br",null,null,-1))),zl=Ll((()=>(0,s.Lk)("br",null,null,-1))),Ul=Ll((()=>(0,s.Lk)("input",{type:"submit",value:"Update",class:"submit"},null,-1)));function Gl(e,t,o,l,a,r){const i=(0,s.g2)("Navbar"),c=(0,s.g2)("Libmenu"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.Lk)("div",yl,[(0,s.Lk)("div",_l,[(0,s.Lk)("div",fl,[(0,s.bF)(c)]),(0,s.Lk)("div",Al,[wl,Cl,Sl,Fl,(0,s.Lk)("form",{autocomplete:"off",method:"POST",onSubmit:t[0]||(t[0]=(0,n.D$)(((...e)=>r.sendData&&r.sendData(...e)),["prevent"]))},[(0,s.Lk)("input",{type:"email",name:"email",placeholder:a.user.email,class:"inp",disabled:""},null,8,El),Bl,jl,xl,Il,Tl,Ol,Xl,Dl,Nl,Ql,Rl,Pl,ql,Kl,zl,Ul],32)])])]),(0,s.bF)(u)],64)}const Wl=e=>((0,s.Qi)("data-v-295cc210"),e=e(),(0,s.jt)(),e),$l={class:"lefttextup"},Jl=Wl((()=>(0,s.Lk)("img",{src:Kn,alt:"Big user icon",class:"usriconup"},null,-1))),Ml={class:"usernameup"},Hl={class:"display-6"},Vl={class:"emailup"},Yl={class:"usrmenu"},Zl={style:{"list-style-type":"none"}},ea={class:"usrmenu_links mb-4"},ta={class:"usrmenu_links mb-4"},oa={class:"usrmenu_links mb-4"},na={class:"usrmenu_links mb-4"},sa={class:"usrmenu_links mb-4"},la={class:"usrmenu_links mb-4"},aa={class:"usrmenu_links mb-4"},ra={class:"usrmenu_links mb-4"};function ia(e,t,o,n,l,a){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",$l,[Jl,(0,s.Lk)("span",Ml,[(0,s.Lk)("h1",Hl,(0,k.v_)(l.user.f_name)+" "+(0,k.v_)(l.user.l_name),1)]),(0,s.Lk)("span",Vl,[(0,s.Lk)("h5",null,(0,k.v_)(l.user.email),1)]),(0,s.Lk)("div",Yl,[(0,s.Lk)("ul",Zl,[(0,s.Lk)("li",ea,[(0,s.bF)(r,{to:"/lib/profile","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Edit Profile ")])),_:1})]),(0,s.Lk)("li",ta,[(0,s.bF)(r,{to:"/lib/book_requests","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Book Requests ")])),_:1})]),(0,s.Lk)("li",oa,[(0,s.bF)(r,{to:"/lib/all_books","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Books ")])),_:1})]),(0,s.Lk)("li",na,[(0,s.bF)(r,{to:"/lib/all_sections","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Sections ")])),_:1})]),(0,s.Lk)("li",sa,[(0,s.bF)(r,{to:"/lib/books_issued","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Books Issued ")])),_:1})]),(0,s.Lk)("li",la,[(0,s.bF)(r,{to:"/lib/stats","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Statistics ")])),_:1})]),(0,s.Lk)("li",aa,[(0,s.bF)(r,{to:"/lib/all_authors","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Authors ")])),_:1})]),(0,s.Lk)("li",ra,[(0,s.bF)(r,{to:"/lib/reports","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)(" Reports ")])),_:1})])])])])}var ca={name:"userProfile",mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user=e.user_details})).catch((e=>console.log(e)))},data(){return{user:{}}}};const ua=(0,a.A)(ca,[["render",ia],["__scopeId","data-v-295cc210"]]);var da=ua,ka={name:"userProfile",mounted(){fetch("https://sohamk.pythonanywhere.com/auth/myinfo",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.user=e.user_details})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q,Libmenu:da},data(){return{user:{}}},methods:{sendData(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries()),n=JSON.stringify({...o});fetch("https://sohamk.pythonanywhere.com/auth/updtusr",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:n}).then((function(e){if(!e.ok&&401==e.status)throw je()("Error!","Invalid Password","error"),new Error("HTTP error, status = "+e.status);return e.json()})).then((()=>{je()("Success!","Profile updated successfully","success").then((()=>{window.location.reload()}))}))}}};const ha=(0,a.A)(ka,[["render",Gl],["__scopeId","data-v-4fac2a30"]]);var pa=ha;const ba=e=>((0,s.Qi)("data-v-4dd297f4"),e=e(),(0,s.jt)(),e),ma={class:"bgup"},ga={class:"row mainrowup"},va={class:"col-5 leftcolup"},La={class:"col rightcolup"},ya=ba((()=>(0,s.Lk)("header",{class:"display-4"},"Book Requests",-1))),_a=ba((()=>(0,s.Lk)("br",null,null,-1))),fa=ba((()=>(0,s.Lk)("br",null,null,-1))),Aa=ba((()=>(0,s.Lk)("br",null,null,-1))),wa={class:"table"},Ca=ba((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",{scope:"col"},"User Id"),(0,s.Lk)("th",{scope:"col"},"Book Requested"),(0,s.Lk)("th",{scope:"col"},"Action")],-1))),Sa=["onClick"],Fa=["onClick"];function Ea(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Libmenu"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",ma,[(0,s.Lk)("div",ga,[(0,s.Lk)("div",va,[(0,s.bF)(i)]),(0,s.Lk)("div",La,[ya,_a,fa,Aa,(0,s.Lk)("table",wa,[Ca,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.books_req,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.Books,((t,o)=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(e.usr_id),1),(0,s.Lk)("td",null,(0,k.v_)(t.book_name),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm m-2",onClick:o=>a.acceptReq(e.usr_id,t.book_id)},"Approve",8,Sa),(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:o=>a.rejectReq(e.usr_id,t.book_id)},"Reject",8,Fa)])])))),256))],64)))),256))])])])])]),(0,s.bF)(c)],64)}var Ba={name:"LibAllReqBooks",mounted(){fetch("https://sohamk.pythonanywhere.com/lib/get_all_req_books",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("ac_token"),"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>this.books_req=e))},components:{Navbar:Vt,Footer:Q,Libmenu:da},data(){return{books_req:{},index:0}},computed:{},methods:{acceptReq(e,t){fetch("https://sohamk.pythonanywhere.com/lib/approve_request",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("ac_token"),"Content-Type":"application/json"},body:JSON.stringify({book_id:t,usr_id:e})}).then((e=>e.json())).then((e=>{"Book request approved"==e.message&&je()({title:"Done",text:e.message,icon:"success",button:"OK"}).then((()=>{window.location.reload()}))}))},rejectReq(e,t){fetch("https://sohamk.pythonanywhere.com/lib/reject_request",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("ac_token"),"Content-Type":"application/json"},body:JSON.stringify({book_id:t,usr_id:e})}).then((e=>e.json())).then((e=>{"Book request rejected"==e.message&&je()({title:"Done",text:e.message,icon:"success",button:"OK"}).then((()=>{window.location.reload()}))}))}}};const ja=(0,a.A)(Ba,[["render",Ea],["__scopeId","data-v-4dd297f4"]]);var xa=ja;const Ia=e=>((0,s.Qi)("data-v-0255dea1"),e=e(),(0,s.jt)(),e),Ta={class:"bgup"},Oa={class:"row mainrowup"},Xa={class:"col-5 leftcolup"},Da={key:0,class:"col rightcolup addfrm"},Na={class:"closebtn"},Qa={key:1,class:"col rightcolup addfrm"},Ra={class:"closebtn"},Pa={key:2,class:"col rightcolup bookstable"},qa=Ia((()=>(0,s.Lk)("header",{class:"display-4"},"All Books ",-1))),Ka=Ia((()=>(0,s.Lk)("br",null,null,-1))),za=Ia((()=>(0,s.Lk)("br",null,null,-1))),Ua=Ia((()=>(0,s.Lk)("br",null,null,-1))),Ga={class:"table"},Wa=Ia((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"}," Index "),(0,s.Lk)("th",{scope:"col"}," Book Name "),(0,s.Lk)("th",{scope:"col"}," Authors "),(0,s.Lk)("th",{scope:"col"}," Section "),(0,s.Lk)("th",{scope:"col"}," Actions ")])],-1))),$a={key:0},Ja=["onClick"],Ma=["onClick"],Ha={class:"addbk m-5"};function Va(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Libmenu"),c=(0,s.g2)("Addbkfrm"),u=(0,s.g2)("Updtbkfrm"),d=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",Ta,[(0,s.Lk)("div",Oa,[(0,s.Lk)("div",Xa,[(0,s.bF)(i)]),l.flag&!l.updtflag?((0,s.uX)(),(0,s.CE)("div",Da,[(0,s.Lk)("button",Na,[(0,s.Lk)("img",{src:Ve,alt:"Close Button",onClick:t[0]||(t[0]=e=>l.flag=!1)})]),(0,s.bF)(c,{Books:l.books,flag:l.flag},null,8,["Books","flag"])])):(0,s.Q3)("",!0),!l.flag&l.updtflag?((0,s.uX)(),(0,s.CE)("div",Qa,[(0,s.Lk)("button",Ra,[(0,s.Lk)("img",{src:Ve,alt:"Close Button",onClick:t[1]||(t[1]=e=>l.updtflag=!1)})]),(0,s.bF)(u,{Books:l.books,flag:l.updtflag,bk_id:l.bk_id},null,8,["Books","flag","bk_id"])])):(0,s.Q3)("",!0),!l.flag&!l.updtflag?((0,s.uX)(),(0,s.CE)("div",Pa,[qa,Ka,za,Ua,(0,s.Lk)("table",Ga,[Wa,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.books,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[e.book_section?((0,s.uX)(),(0,s.CE)("tbody",$a,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_name),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_authors.author_names.join(", ")),1),(0,s.Lk)("td",null,(0,k.v_)(e.book_section.section_name),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"action-btn btn btn-outline-primary btn-sm m-2",onClick:t=>a.deleteBook(e.book_id)}," Remove ",8,Ja),(0,s.Lk)("button",{class:"action-btn btn btn-outline-primary btn-sm",onClick:t=>(l.updtflag=!0,l.bk_id=e.book_id)}," Update ",8,Ma)])])])):(0,s.Q3)("",!0)],64)))),256))]),(0,s.Lk)("div",Ha,[(0,s.Lk)("button",{class:"addbkbtn btn btn-outline-primary btn-lg",onClick:t[2]||(t[2]=e=>l.flag=!0)}," Add a Book ")])])):(0,s.Q3)("",!0)])]),(0,s.bF)(d)],64)}const Ya=e=>((0,s.Qi)("data-v-03a4b302"),e=e(),(0,s.jt)(),e),Za={class:"frm"},er=Ya((()=>(0,s.Lk)("header",{class:"display-4"}," Add a Book ",-1))),tr=Ya((()=>(0,s.Lk)("br",null,null,-1))),or=Ya((()=>(0,s.Lk)("br",null,null,-1))),nr=Ya((()=>(0,s.Lk)("br",null,null,-1))),sr=(0,s.Fv)('<strong data-v-03a4b302><label for="book_name" style="position:relative;right:260px;" class="label" data-v-03a4b302> Book Name </label></strong><br data-v-03a4b302><br data-v-03a4b302><input type="text" name="book_name" placeholder="Book Name" class="inp" required data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><strong data-v-03a4b302><label for="book_description" style="position:relative;right:225px;" class="label" data-v-03a4b302> Book Description </label></strong><br data-v-03a4b302><br data-v-03a4b302><input type="text" name="book_description" placeholder="Book Description" class="inp" required data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><strong data-v-03a4b302><label for="price" style="position:relative;right:250px;" class="label" data-v-03a4b302> Book Price </label></strong><br data-v-03a4b302><br data-v-03a4b302><input type="text" name="price" placeholder="Book Price" class="inp" required data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><br data-v-03a4b302><strong data-v-03a4b302><label for="section_id" style="position:relative;right:260px;" class="label" data-v-03a4b302> Section </label></strong><br data-v-03a4b302><br data-v-03a4b302>',24),lr={name:"section_id",style:{position:"relative",right:"190px"},required:""},ar=["value"],rr=Ya((()=>(0,s.Lk)("br",null,null,-1))),ir=Ya((()=>(0,s.Lk)("br",null,null,-1))),cr=Ya((()=>(0,s.Lk)("br",null,null,-1))),ur=Ya((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"authors",style:{position:"relative",right:"250px"}}," Author(s) ")],-1))),dr=Ya((()=>(0,s.Lk)("br",null,null,-1))),kr=Ya((()=>(0,s.Lk)("br",null,null,-1))),hr=["value"],pr=Ya((()=>(0,s.Lk)("br",null,null,-1))),br=Ya((()=>(0,s.Lk)("br",null,null,-1))),mr=Ya((()=>(0,s.Lk)("br",null,null,-1))),gr=Ya((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"pdf",style:{position:"relative",right:"200px"}}," Add Book Content ")],-1))),vr=Ya((()=>(0,s.Lk)("br",null,null,-1))),Lr=Ya((()=>(0,s.Lk)("br",null,null,-1))),yr=Ya((()=>(0,s.Lk)("input",{type:"file",name:"pdf",accept:"application/pdf",style:{position:"relative",right:"90px"},required:""},null,-1))),_r=Ya((()=>(0,s.Lk)("br",null,null,-1))),fr=Ya((()=>(0,s.Lk)("br",null,null,-1))),Ar=Ya((()=>(0,s.Lk)("br",null,null,-1))),wr=Ya((()=>(0,s.Lk)("br",null,null,-1))),Cr=Ya((()=>(0,s.Lk)("br",null,null,-1))),Sr=Ya((()=>(0,s.Lk)("input",{type:"submit",value:"Add",class:"submit"},null,-1)));function Fr(e,t,o,l,a,r){return(0,s.uX)(),(0,s.CE)("div",Za,[er,tr,or,nr,(0,s.Lk)("form",{autocomplete:"off",onSubmit:t[1]||(t[1]=(0,n.D$)(((...e)=>r.addBook&&r.addBook(...e)),["prevent"])),enctype:"multipart/form-data"},[sr,(0,s.Lk)("select",lr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.sections,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{value:t},(0,k.v_)(e),9,ar)))),256))]),rr,ir,cr,ur,dr,kr,(0,s.bo)((0,s.Lk)("select",{name:"authors","onUpdate:modelValue":t[0]||(t[0]=e=>a.selected=e),style:{position:"relative",right:"190px"},multiple:"",required:""},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.authors,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{value:t},(0,k.v_)(e),9,hr)))),256))],512),[[n.u1,a.selected]]),pr,br,mr,gr,vr,Lr,yr,_r,fr,Ar,wr,Cr,Sr],32)])}var Er={name:"Addbkfrm",props:{Books:Object,flag:Boolean},data(){return{sections:{},authors:{},content:"",selected:[]}},computed(){},methods:{addBook(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());let n=e.target.elements.pdf.files[0];var s=new FileReader;s.onload=e=>{let t=e.target.result;const n=Object.keys(o),s=n.pop();delete o["authors"],delete o[s],fetch("https://sohamk.pythonanywhere.com/books/add_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({...o,content:t.slice(28),authors:Object.values(this.selected)})}).then((e=>(200==e.status?swal({title:"Book Added",text:"Book Added Successfully",icon:"success"}).then((()=>{window.location.reload()})):swal("Error","Book already exists","error"),e.json()))).catch((e=>{console.log(e)}))},s.readAsDataURL(n)}},mounted(){fetch("https://sohamk.pythonanywhere.com/sections/get_names",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.sections=e})),fetch("https://sohamk.pythonanywhere.com/authors/get_names",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.authors=e}))}};const Br=(0,a.A)(Er,[["render",Fr],["__scopeId","data-v-03a4b302"]]);var jr=Br;const xr=e=>((0,s.Qi)("data-v-aa708eb0"),e=e(),(0,s.jt)(),e),Ir={key:0,class:"frm"},Tr=xr((()=>(0,s.Lk)("header",{class:"display-4"}," Update Book Details ",-1))),Or=xr((()=>(0,s.Lk)("br",null,null,-1))),Xr=xr((()=>(0,s.Lk)("br",null,null,-1))),Dr=xr((()=>(0,s.Lk)("br",null,null,-1))),Nr=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"book_id",style:{position:"relative",right:"275px"}}," Book ID ")],-1))),Qr=xr((()=>(0,s.Lk)("br",null,null,-1))),Rr=xr((()=>(0,s.Lk)("br",null,null,-1))),Pr=["placeholder"],qr=xr((()=>(0,s.Lk)("br",null,null,-1))),Kr=xr((()=>(0,s.Lk)("br",null,null,-1))),zr=xr((()=>(0,s.Lk)("br",null,null,-1))),Ur=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"book_name",style:{position:"relative",right:"260px"}}," Book Name ")],-1))),Gr=xr((()=>(0,s.Lk)("br",null,null,-1))),Wr=xr((()=>(0,s.Lk)("br",null,null,-1))),$r=["value"],Jr=xr((()=>(0,s.Lk)("br",null,null,-1))),Mr=xr((()=>(0,s.Lk)("br",null,null,-1))),Hr=xr((()=>(0,s.Lk)("br",null,null,-1))),Vr=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"book_description",style:{position:"relative",right:"225px"}}," Book Description ")],-1))),Yr=xr((()=>(0,s.Lk)("br",null,null,-1))),Zr=xr((()=>(0,s.Lk)("br",null,null,-1))),ei=["value"],ti=xr((()=>(0,s.Lk)("br",null,null,-1))),oi=xr((()=>(0,s.Lk)("br",null,null,-1))),ni=xr((()=>(0,s.Lk)("br",null,null,-1))),si=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"uprice",style:{position:"relative",right:"250px"}}," Book Price ")],-1))),li=xr((()=>(0,s.Lk)("br",null,null,-1))),ai=xr((()=>(0,s.Lk)("br",null,null,-1))),ri=["value"],ii=xr((()=>(0,s.Lk)("br",null,null,-1))),ci=xr((()=>(0,s.Lk)("br",null,null,-1))),ui=xr((()=>(0,s.Lk)("br",null,null,-1))),di=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"section_id",style:{position:"relative",right:"260px"}}," Section ")],-1))),ki=xr((()=>(0,s.Lk)("br",null,null,-1))),hi=xr((()=>(0,s.Lk)("br",null,null,-1))),pi={style:{position:"relative",left:"100px"}},bi={name:"section_id",style:{position:"relative",right:"300px"},required:""},mi=["value"],gi=["value"],vi=xr((()=>(0,s.Lk)("br",null,null,-1))),Li=xr((()=>(0,s.Lk)("br",null,null,-1))),yi=xr((()=>(0,s.Lk)("br",null,null,-1))),_i=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"authors",style:{position:"relative",right:"250px"}}," Author(s) ")],-1))),fi=xr((()=>(0,s.Lk)("br",null,null,-1))),Ai=xr((()=>(0,s.Lk)("br",null,null,-1))),wi={style:{position:"relative",left:"160px",bottom:"30px"}},Ci={name:"authors",style:{position:"relative",right:"350px"},multiple:""},Si=["value"],Fi=["value"],Ei=xr((()=>(0,s.Lk)("br",null,null,-1))),Bi=xr((()=>(0,s.Lk)("br",null,null,-1))),ji=xr((()=>(0,s.Lk)("br",null,null,-1))),xi=xr((()=>(0,s.Lk)("strong",null,[(0,s.Lk)("label",{for:"pdf",style:{position:"relative",right:"200px"}}," Change Book Content ")],-1))),Ii=xr((()=>(0,s.Lk)("br",null,null,-1))),Ti=xr((()=>(0,s.Lk)("br",null,null,-1))),Oi=xr((()=>(0,s.Lk)("input",{type:"file",name:"pdf",accept:"application/pdf"},null,-1))),Xi=xr((()=>(0,s.Lk)("i",null,"View Current Content",-1))),Di=xr((()=>(0,s.Lk)("br",null,null,-1))),Ni=xr((()=>(0,s.Lk)("br",null,null,-1))),Qi=xr((()=>(0,s.Lk)("br",null,null,-1))),Ri=xr((()=>(0,s.Lk)("input",{type:"submit",value:"Update",class:"submit"},null,-1)));function Pi(e,t,o,l,a,r){const i=(0,s.g2)("router-link");return(0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.Books,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[e.book_id==o.bk_id?((0,s.uX)(),(0,s.CE)("div",Ir,[Tr,Or,Xr,Dr,(0,s.Lk)("form",{autocomplete:"off",onSubmit:t[0]||(t[0]=(0,n.D$)(((...e)=>r.updateBook&&r.updateBook(...e)),["prevent"])),enctype:"multipart/form-data"},[Nr,Qr,Rr,(0,s.Lk)("input",{type:"text",name:"book_id",placeholder:e.book_id,class:"inp",disabled:""},null,8,Pr),qr,Kr,zr,Ur,Gr,Wr,(0,s.Lk)("input",{type:"text",name:"book_name",placeholder:"Book Name",class:"inp",value:e.book_name,required:""},null,8,$r),Jr,Mr,Hr,Vr,Yr,Zr,(0,s.Lk)("input",{type:"text",name:"book_description",placeholder:"Book Description",class:"inp",value:e.book_description,required:""},null,8,ei),ti,oi,ni,si,li,ai,(0,s.Lk)("input",{type:"text",name:"price",placeholder:"Book Price",class:"inp",value:e.book_price,required:""},null,8,ri),ii,ci,ui,di,ki,hi,(0,s.Lk)("label",pi,"Current Section: "+(0,k.v_)(e.book_section.section_name),1),(0,s.Lk)("select",bi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.sections,((t,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[o==e.book_section.section_id?((0,s.uX)(),(0,s.CE)("option",{key:0,value:o,selected:""},(0,k.v_)(t),9,mi)):((0,s.uX)(),(0,s.CE)("option",{key:1,value:o},(0,k.v_)(t),9,gi))],64)))),256))]),vi,Li,yi,e.book_authors?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[_i,fi,Ai,(0,s.Lk)("label",wi," Current Author(s): "+(0,k.v_)(e.book_authors.author_names.join(", ")),1),(0,s.Lk)("select",Ci,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.authors,((t,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[e.book_authors.author_names.includes(t)?((0,s.uX)(),(0,s.CE)("option",{key:0,value:o,selected:""},(0,k.v_)(t),9,Si)):((0,s.uX)(),(0,s.CE)("option",{key:1,value:o},(0,k.v_)(t),9,Fi))],64)))),256))]),Ei,Bi,ji],64)):(0,s.Q3)("",!0),xi,Ii,Ti,Oi,(0,s.bF)(i,{to:`/read/${e.book_id}`,style:{position:"relative",left:"10px","text-decoration":"none",color:"black"}},{default:(0,s.k6)((()=>[Xi])),_:2},1032,["to"]),Di,Ni,Qi,Ri],32)])):(0,s.Q3)("",!0)],64)))),256)}var qi={name:"Addbkfrm",props:{Books:Object,flag:Boolean,bk_id:Number},data(){return{sections:{},authors:{},aut_selected:[]}},computed(){},methods:{updateBook(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());let n=e.target.elements.pdf.files[0];var s=new FileReader;if(n)s.onload=t=>{let n=t.target.result;const s=Object.keys(o),l=s.pop();delete o["authors"],delete o[l];let a=e.target.elements.authors.selectedOptions,r=[];for(const e of a)r.push(e.value);let i={...o,content:n.slice(28),authors:r,book_id:this.bk_id};fetch("https://sohamk.pythonanywhere.com/books/update_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(i)}).then((e=>e.json())).then((e=>{"Book updated successfully"==e.message&&swal({title:"Done",text:"Book updated successfully",icon:"success",button:"OK"}).then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))},s.readAsDataURL(n);else{delete o["authors"];const t=Object.keys(o).pop();delete o[t];let n=e.target.elements.authors.selectedOptions,s=[];for(const e of n)s.push(e.value);let l={...o,authors:s,content:"",book_id:this.bk_id};fetch("https://sohamk.pythonanywhere.com/books/update_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(l)}).then((e=>e.json())).then((e=>{"Book updated successfully"==e.message&&swal({title:"Done",text:"Book updated successfully",icon:"success",button:"OK"}).then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))}}},mounted(){fetch("https://sohamk.pythonanywhere.com/sections/get_names",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.sections=e})),fetch("https://sohamk.pythonanywhere.com/authors/get_names",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.authors=e}))}};const Ki=(0,a.A)(qi,[["render",Pi],["__scopeId","data-v-aa708eb0"]]);var zi=Ki,Ui={name:"allBooks",mounted(){fetch("https://sohamk.pythonanywhere.com/books",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.books=e})).catch((e=>console.log(e)))},components:{Navbar:Vt,Footer:Q,Libmenu:da,Addbkfrm:jr,Updtbkfrm:zi},data(){return{books:{},flag:!1,updtflag:!1,bk_id:0}},computed:{},methods:{deleteBook(e){je()({title:"Are you sure?",text:"Do you want to really delete this book?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&fetch("https://sohamk.pythonanywhere.com/books/delete_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({book_id:e})}).then((e=>e.json())).then((e=>{"Book deleted successfully"==e.message&&je()({title:"Done",text:"Book deleted successfully",icon:"success",button:"OK"}).then((()=>{location.reload()}))}))}))}}};const Gi=(0,a.A)(Ui,[["render",Va],["__scopeId","data-v-0255dea1"]]);var Wi=Gi;const $i=e=>((0,s.Qi)("data-v-1235d568"),e=e(),(0,s.jt)(),e),Ji={class:"bgup"},Mi={class:"row mainrowup"},Hi={class:"col-5 leftcolup"},Vi={class:"col rightcolup"},Yi=$i((()=>(0,s.Lk)("header",{class:"display-4 mb-5"}," Sections ",-1))),Zi={class:"table"},ec=$i((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",{scope:"col"},"Index"),(0,s.Lk)("th",{scope:"col"},"Section Name"),(0,s.Lk)("th",{scope:"col"},"Section Description"),(0,s.Lk)("th",{scope:"col"},"Date Created"),(0,s.Lk)("th",{scope:"col"},"Action")],-1))),tc=["onClick"],oc=["onClick"],nc={key:0,class:"formdiv"},sc={type:"button",class:"close"},lc=$i((()=>(0,s.Lk)("span",{style:{position:"relative",right:"130px","font-weight":"bold"}},"Enter Name:",-1))),ac=["value"],rc=$i((()=>(0,s.Lk)("span",{style:{position:"relative",right:"100px","font-weight":"bold"}},"Enter Description:",-1))),ic=["value"],cc=$i((()=>(0,s.Lk)("input",{class:"btn btn-outline-primary",type:"submit",value:"Submit"},null,-1))),uc={key:1,class:"formdiv"},dc={type:"button",class:"close"},kc=$i((()=>(0,s.Lk)("span",{style:{position:"relative",right:"130px","font-weight":"bold"}},"Enter Name:",-1))),hc=$i((()=>(0,s.Lk)("input",{class:"form-control",type:"text",name:"section_name",placeholder:"Section Name"},null,-1))),pc=$i((()=>(0,s.Lk)("span",{style:{position:"relative",right:"100px","font-weight":"bold"}},"Enter Description:",-1))),bc=$i((()=>(0,s.Lk)("input",{class:"form-control",type:"text",name:"section_description",placeholder:"Section Description"},null,-1))),mc=$i((()=>(0,s.Lk)("input",{class:"btn btn-outline-primary",type:"submit",value:"Submit"},null,-1)));function gc(e,t,o,l,a,r){const i=(0,s.g2)("Navbar"),c=(0,s.g2)("Libmenu"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.Lk)("div",Ji,[(0,s.Lk)("div",Mi,[(0,s.Lk)("div",Hi,[(0,s.bF)(c)]),(0,s.Lk)("div",Vi,[Yi,(0,s.Lk)("table",Zi,[ec,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.sections,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.section_name),1),(0,s.Lk)("td",null,(0,k.v_)(e.section_description),1),(0,s.Lk)("td",null,(0,k.v_)(e.section_date_created),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm m-2",onClick:t=>(a.updtflag=!0,a.updt_section_name=e.section_name,a.updt_section_desc=e.section_description,a.updt_section_id=e.section_id)}," Update ",8,tc),(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>r.removeSection(e.section_id)},"Remove",8,oc)])])))),256))])]),a.updtflag?((0,s.uX)(),(0,s.CE)("div",nc,[(0,s.Lk)("form",{onSubmit:t[1]||(t[1]=(0,n.D$)(((...e)=>r.updateSection&&r.updateSection(...e)),["prevent"])),class:"fdbform"},[(0,s.Lk)("button",sc,[(0,s.Lk)("img",{src:Ve,onClick:t[0]||(t[0]=e=>a.updtflag=!1)})]),lc,(0,s.eW)(),(0,s.Lk)("input",{class:"form-control",type:"text",name:"section_name",value:a.updt_section_name},null,8,ac),rc,(0,s.eW)(),(0,s.Lk)("input",{class:"form-control",type:"text",name:"section_description",value:a.updt_section_desc},null,8,ic),cc],32)])):(0,s.Q3)("",!0),a.addflag?((0,s.uX)(),(0,s.CE)("div",uc,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,n.D$)(((...e)=>r.addSection&&r.addSection(...e)),["prevent"])),class:"fdbform"},[(0,s.Lk)("button",dc,[(0,s.Lk)("img",{src:Ve,onClick:t[2]||(t[2]=e=>a.addflag=!1)})]),kc,(0,s.eW)(),hc,pc,(0,s.eW)(),bc,mc],32)])):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"btn btn-outline-primary btn-lg m-5",onClick:t[4]||(t[4]=e=>a.addflag=!0)},"Add Section")])])]),(0,s.bF)(u)],64)}var vc={name:"allSections",data(){return{sections:{},updtflag:!1,addflag:!1,updt_section_name:"",updt_section_desc:"",updt_section_id:""}},mounted(){fetch("https://sohamk.pythonanywhere.com/sections",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.sections=e}))},components:{Navbar:Vt,Footer:Q,Libmenu:da},methods:{updateSection(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());let n={...o,section_id:this.updt_section_id};fetch("https://sohamk.pythonanywhere.com/sections/update_section",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(n)}).then((e=>{200==e.status&&swal("Done","Section Updated","success").then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))},removeSection(e){swal({title:"Are you sure?",text:"Do you really want to remove this section?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&fetch("https://sohamk.pythonanywhere.com/sections/delete_section",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({section_id:e})}).then((e=>{200==e.status&&swal("Done","Section Removed","success").then((()=>{window.location.reload()}))}))}))},addSection(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());fetch("https://sohamk.pythonanywhere.com/sections/add_section",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(o)}).then((e=>{200==e.status&&swal("Done","Section Added","success").then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))}}};const Lc=(0,a.A)(vc,[["render",gc],["__scopeId","data-v-1235d568"]]);var yc=Lc;const _c=e=>((0,s.Qi)("data-v-abe72e98"),e=e(),(0,s.jt)(),e),fc={class:"bgup"},Ac={class:"row mainrowup"},wc={class:"col-5 leftcolup"},Cc={class:"col rightcolup"},Sc=_c((()=>(0,s.Lk)("header",{class:"display-4"},"Books Issued",-1))),Fc=_c((()=>(0,s.Lk)("br",null,null,-1))),Ec=_c((()=>(0,s.Lk)("br",null,null,-1))),Bc=_c((()=>(0,s.Lk)("br",null,null,-1))),jc={class:"table"},xc=_c((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",{scope:"col"},"User Id"),(0,s.Lk)("th",{scope:"col"},"Book Name"),(0,s.Lk)("th",{scope:"col"},"Days Issued"),(0,s.Lk)("th",{scope:"col"},"Action")],-1))),Ic=["onClick"];function Tc(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Libmenu"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",fc,[(0,s.Lk)("div",Ac,[(0,s.Lk)("div",wc,[(0,s.bF)(i)]),(0,s.Lk)("div",Cc,[Sc,Fc,Ec,Bc,(0,s.Lk)("table",jc,[xc,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.books_issued,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(e.usr_id),1),(0,s.Lk)("td",null,(0,k.v_)(e.book.book_name),1),(0,s.Lk)("td",null,(0,k.v_)(e.days_issued),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>a.revokeAccess(e.usr_id,e.book.book_id)}," Revoke ",8,Ic)])])))),256))])])])])]),(0,s.bF)(c)],64)}var Oc={name:"allIssuedBooks",mounted(){fetch("https://sohamk.pythonanywhere.com/lib/get_all_issued_books",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("ac_token")}}).then((e=>e.json())).then((e=>{this.books_issued=e})).catch((e=>{console.log(e)}))},components:{Navbar:Vt,Footer:Q,Libmenu:da},data(){return{books_issued:{}}},computed:{},methods:{revokeAccess(e,t){je()({title:"Are you sure?",text:"Do you really want to revoke access from the user to this book?",icon:"warning",buttons:!0,dangerMode:!0}).then((o=>{o&&fetch("https://sohamk.pythonanywhere.com/lib/revoke_issued_book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("ac_token")},body:JSON.stringify({usr_id:e,book_id:t})}).then((e=>{200==e.status&&je()("Success","Book revoked successfully","success").then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))}))}}};const Xc=(0,a.A)(Oc,[["render",Tc],["__scopeId","data-v-abe72e98"]]);var Dc=Xc;const Nc=e=>((0,s.Qi)("data-v-359a81ba"),e=e(),(0,s.jt)(),e),Qc={class:"bgup"},Rc={class:"row mainrowup"},Pc={class:"col-5 leftcolup"},qc={class:"col rightcolup"},Kc=Nc((()=>(0,s.Lk)("header",{class:"display-4 mb-4"},"Statistics",-1))),zc={class:"img1 mb-4"},Uc=Nc((()=>(0,s.Lk)("h1",{class:"display-6",style:{"font-size":"30px"}}," Distribution of books issued within sections",-1))),Gc=Nc((()=>(0,s.Lk)("br",null,null,-1))),Wc=["src"],$c={class:"img2"},Jc=Nc((()=>(0,s.Lk)("h1",{class:"display-6",style:{"font-size":"30px"}}," Distribution of books within sections",-1))),Mc=Nc((()=>(0,s.Lk)("br",null,null,-1))),Hc=["src"];function Vc(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Libmenu"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",Qc,[(0,s.Lk)("div",Rc,[(0,s.Lk)("div",Pc,[(0,s.bF)(i)]),(0,s.Lk)("div",qc,[Kc,(0,s.Lk)("div",zc,[Uc,Gc,(0,s.Lk)("img",{src:l.img1_src,width:"500",height:"300"},null,8,Wc)]),(0,s.Lk)("div",$c,[Jc,Mc,(0,s.Lk)("img",{src:l.img2_src,width:"500",height:"300"},null,8,Hc)])])])]),(0,s.bF)(c)],64)}var Yc={name:"libStats",data(){return{img1_src:"",img2_src:""}},components:{Navbar:Vt,Footer:Q,Libmenu:da},mounted(){fetch("https://sohamk.pythonanywhere.com/lib/get_stats",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("ac_token")}}).then((e=>e.json())).then((e=>{this.img1_src=e.img1_src,this.img2_src=e.img2_src})).catch((e=>{console.log(e)}))}};const Zc=(0,a.A)(Yc,[["render",Vc],["__scopeId","data-v-359a81ba"]]);var eu=Zc;const tu=e=>((0,s.Qi)("data-v-2bf30a48"),e=e(),(0,s.jt)(),e),ou={class:"bgup"},nu={class:"row mainrowup"},su={class:"col-5 leftcolup"},lu={class:"col rightcolup"},au=tu((()=>(0,s.Lk)("header",{class:"display-4 mb-5"}," Authors ",-1))),ru={class:"table"},iu=tu((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",{scope:"col"},"Index"),(0,s.Lk)("th",{scope:"col"},"Author Name"),(0,s.Lk)("th",{scope:"col"},"Author Description"),(0,s.Lk)("th",{scope:"col"},"Action")],-1))),cu=["onClick"],uu=["onClick"],du={key:0,class:"formdiv"},ku={type:"button",class:"close"},hu=tu((()=>(0,s.Lk)("span",{style:{position:"relative",right:"130px","font-weight":"bold"}},"Enter Name:",-1))),pu=["value"],bu=tu((()=>(0,s.Lk)("span",{style:{position:"relative",right:"100px","font-weight":"bold"}},"Enter Description:",-1))),mu=["value"],gu=tu((()=>(0,s.Lk)("input",{class:"btn btn-outline-primary",type:"submit",value:"Submit"},null,-1))),vu={key:1,class:"formdiv"},Lu={type:"button",class:"close"},yu=tu((()=>(0,s.Lk)("span",{style:{position:"relative",right:"130px","font-weight":"bold"}},"Enter Name:",-1))),_u=tu((()=>(0,s.Lk)("input",{class:"form-control",type:"text",name:"author_name",placeholder:"author Name"},null,-1))),fu=tu((()=>(0,s.Lk)("span",{style:{position:"relative",right:"100px","font-weight":"bold"}},"Enter Description:",-1))),Au=tu((()=>(0,s.Lk)("input",{class:"form-control",type:"text",name:"author_description",placeholder:"author Description"},null,-1))),wu=tu((()=>(0,s.Lk)("input",{class:"btn btn-outline-primary",type:"submit",value:"Submit"},null,-1)));function Cu(e,t,o,l,a,r){const i=(0,s.g2)("Navbar"),c=(0,s.g2)("Libmenu"),u=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.Lk)("div",ou,[(0,s.Lk)("div",nu,[(0,s.Lk)("div",su,[(0,s.bF)(c)]),(0,s.Lk)("div",lu,[au,(0,s.Lk)("table",ru,[iu,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.authors,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,(0,k.v_)(t),1),(0,s.Lk)("td",null,(0,k.v_)(e.author_name),1),(0,s.Lk)("td",null,(0,k.v_)(e.author_description),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm m-2",onClick:t=>(a.updtflag=!0,a.updt_author_name=e.author_name,a.updt_author_desc=e.author_description,a.updt_author_id=e.author_id)}," Update ",8,cu),(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>r.removeauthor(e.author_id)},"Remove",8,uu)])])))),256))])]),a.updtflag?((0,s.uX)(),(0,s.CE)("div",du,[(0,s.Lk)("form",{onSubmit:t[1]||(t[1]=(0,n.D$)(((...e)=>r.updateauthor&&r.updateauthor(...e)),["prevent"])),class:"fdbform"},[(0,s.Lk)("button",ku,[(0,s.Lk)("img",{src:Ve,onClick:t[0]||(t[0]=e=>a.updtflag=!1)})]),hu,(0,s.eW)(),(0,s.Lk)("input",{class:"form-control",type:"text",name:"author_name",value:a.updt_author_name},null,8,pu),bu,(0,s.eW)(),(0,s.Lk)("input",{class:"form-control",type:"text",name:"author_description",value:a.updt_author_desc},null,8,mu),gu],32)])):(0,s.Q3)("",!0),a.addflag?((0,s.uX)(),(0,s.CE)("div",vu,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,n.D$)(((...e)=>r.addauthor&&r.addauthor(...e)),["prevent"])),class:"fdbform"},[(0,s.Lk)("button",Lu,[(0,s.Lk)("img",{src:Ve,onClick:t[2]||(t[2]=e=>a.addflag=!1)})]),yu,(0,s.eW)(),_u,fu,(0,s.eW)(),Au,wu],32)])):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"btn btn-outline-primary btn-lg m-5",onClick:t[4]||(t[4]=e=>a.addflag=!0)},"Add author")])])]),(0,s.bF)(u)],64)}var Su={name:"allAuthors",data(){return{authors:{},updtflag:!1,addflag:!1,updt_author_name:"",updt_author_desc:"",updt_author_id:""}},mounted(){fetch("https://sohamk.pythonanywhere.com/authors",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{this.authors=e}))},components:{Navbar:Vt,Footer:Q,Libmenu:da},methods:{updateauthor(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());let n={...o,author_id:this.updt_author_id};fetch("https://sohamk.pythonanywhere.com/authors/update_author",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(n)}).then((e=>{200==e.status&&swal("Done","Author Updated","success").then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))},removeauthor(e){swal({title:"Are you sure?",text:"Do you really want to remove this author?",icon:"warning",buttons:!0,dangerMode:!0}).then((t=>{t&&fetch("https://sohamk.pythonanywhere.com/authors/delete_author",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify({author_id:e})}).then((e=>{200==e.status&&swal("Done","Author Removed","success").then((()=>{window.location.reload()}))}))}))},addauthor(e){const t=new FormData(e.target),o=Object.fromEntries(t.entries());fetch("https://sohamk.pythonanywhere.com/authors/add_author",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`},body:JSON.stringify(o)}).then((e=>{200==e.status&&swal("Done","Author Added","success").then((()=>{window.location.reload()}))})).catch((e=>{console.log(e)}))}}};const Fu=(0,a.A)(Su,[["render",Cu],["__scopeId","data-v-2bf30a48"]]);var Eu=Fu;const Bu=e=>((0,s.Qi)("data-v-cdede3c0"),e=e(),(0,s.jt)(),e),ju={class:"bgup"},xu={class:"row mainrowup"},Iu={class:"col-5 leftcolup"},Tu={class:"col rightcolup updtfrm text-center mt-5"},Ou=Bu((()=>(0,s.Lk)("header",{class:"display-4 mb-3"}," Generate Reports ",-1))),Xu=Bu((()=>(0,s.Lk)("div",{class:"msg"}," Welcome, you can generate reports here ",-1))),Du={class:"table"},Nu=Bu((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("th",null,"Index"),(0,s.Lk)("th",{scope:"col"},"Report Name"),(0,s.Lk)("th",{scope:"col"},"Action")],-1))),Qu=Bu((()=>(0,s.Lk)("th",null," 1 ",-1))),Ru=Bu((()=>(0,s.Lk)("td",null,"Issued Books Report (.csv)",-1))),Pu=Bu((()=>(0,s.Lk)("th",null," 2 ",-1))),qu=Bu((()=>(0,s.Lk)("td",null,"Requested Books Report (.csv)",-1)));function Ku(e,t,o,n,l,a){const r=(0,s.g2)("Navbar"),i=(0,s.g2)("Libmenu"),c=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",ju,[(0,s.Lk)("div",xu,[(0,s.Lk)("div",Iu,[(0,s.bF)(i)]),(0,s.Lk)("div",Tu,[Ou,Xu,(0,s.Lk)("table",Du,[Nu,(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[Qu,Ru,(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t[0]||(t[0]=e=>a.issuedReport())},"Generate")])]),(0,s.Lk)("tr",null,[Pu,qu,(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t[1]||(t[1]=e=>a.reqReport())},"Generate")])])])])])])]),(0,s.bF)(c)],64)}var zu={name:"libReports",mounted(){},components:{Navbar:Vt,Footer:Q,Libmenu:da},data(){return{}},methods:{issuedReport(){fetch("https://sohamk.pythonanywhere.com/lib/issued_books_csv",{method:"GET",headers:{"Content-type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{"Successful"==e.msg?je()("Success","Reports will be delivered shortly to your mailbox","success"):je()("Error","Something went wrong","error")}))},reqReport(){fetch("https://sohamk.pythonanywhere.com/lib/requested_books_csv",{method:"GET",headers:{"Content-type":"application/json",Authorization:`Bearer ${localStorage.getItem("ac_token")}`}}).then((e=>e.json())).then((e=>{"Successful"==e.msg?je()("Success","Reports will be delivered shortly to your mailbox","success"):je()("Error","Something went wrong","error")}))}}};const Uu=(0,a.A)(zu,[["render",Ku],["__scopeId","data-v-cdede3c0"]]);var Gu=Uu;const Wu=[{path:"/user",name:"user",children:[{path:"login",name:"userLogin",component:q},{path:"signup",name:"userSignup",component:Te},{path:"profile",name:"userProfile",component:cs},{path:"books",name:"userBooks",component:Fs},{path:"books_req",name:"userBooksReq",component:Zs},{path:"cart",name:"userCart",component:vl},{path:"home",name:"userHome",component:eo}]},{path:"/lib",name:"lib",children:[{path:"home",name:"libHome",component:eo},{path:"login",name:"libLogin",component:ae},{path:"profile",name:"libProfile",component:pa},{path:"book_requests",name:"allReqBooks",component:xa},{path:"all_books",name:"allBooks",component:Wi},{path:"all_sections",name:"allSections",component:yc},{path:"books_issued",name:"allIssuedBooks",component:Dc},{path:"stats",name:"libStats",component:eu},{path:"all_authors",name:"allAuthors",component:Eu},{path:"reports",name:"libReports",component:Gu}]},{path:"/read/:book_id",name:"readBook",component:Xs},{path:"/book_info/:j",name:"bookInfo",component:pn},{path:"/",name:"home",component:q}],$u=(0,d.aE)({history:(0,d.LA)(),routes:Wu});var Ju=$u;$u.beforeEach(((e,t,o)=>{"/"==e.path||"/lib/login"==e.path||"/user/signup"==e.path||(fetch("https://sohamk.pythonanywhere.com/auth/refresh_access",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("ref_token")}`}}).then((e=>{if(!e.ok)throw new Error(e.statusText+" "+e.status);return e.json()})).then((e=>{localStorage.setItem("ac_token",e.ac_token)})).catch(),Ns()),o()}));var Mu=o(278),Hu=(0,Mu.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(c).use(Hu).use(Ju).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,l){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],l=e[u][2];for(var r=!0,i=0;i<n.length;i++)(!1&l||a>=l)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(r=!1,l<a&&(a=l));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,s,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/Bookit-V2-Working/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,l,a=n[0],r=n[1],i=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(i)var u=i(o)}for(t&&t(n);c<a.length;c++)l=a[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},n=self["webpackChunkbookit_v2_frontend"]=self["webpackChunkbookit_v2_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(146)}));n=o.O(n)})();
//# sourceMappingURL=app.2b4137b1.js.map